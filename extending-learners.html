<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6.1 Adding new Learners | mlr3 book</title>
  <meta name="description" content="6.1 Adding new Learners | mlr3 book" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="6.1 Adding new Learners | mlr3 book" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://mlr3book.mlr-org.com/" />
  <meta property="og:image" content="https://mlr3book.mlr-org.com/block.png" />
  
  <meta name="github-repo" content="mlr-org/mlr3book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6.1 Adding new Learners | mlr3 book" />
  
  
  <meta name="twitter:image" content="https://mlr3book.mlr-org.com/block.png" />

<meta name="author" content="Marc Becker" />
<meta name="author" content="Martin Binder" />
<meta name="author" content="Bernd Bischl" />
<meta name="author" content="Michel Lang" />
<meta name="author" content="Florian Pfisterer" />
<meta name="author" content="Nicholas G. Reich" />
<meta name="author" content="Jakob Richter" />
<meta name="author" content="Patrick Schratz" />
<meta name="author" content="Raphael Sonabend" />


<meta name="date" content="2020-11-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="180x180" href="apple-touch-icon.png" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="extending.html"/>
<link rel="next" href="extending-measures.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">mlr3 Manual <img src='https://raw.githubusercontent.com/mlr-org/mlr3/master/man/figures/logo.png' width=30 /></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Citation Info</a></li>
<li class="chapter" data-level="" data-path="quickstart.html"><a href="quickstart.html"><i class="fa fa-check"></i>Quickstart</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction and Overview</a></li>
<li class="chapter" data-level="2" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>2</b> Basics</a><ul>
<li class="chapter" data-level="2.1" data-path="r6.html"><a href="r6.html"><i class="fa fa-check"></i><b>2.1</b> Quick R6 Intro for Beginners</a></li>
<li class="chapter" data-level="2.2" data-path="tasks.html"><a href="tasks.html"><i class="fa fa-check"></i><b>2.2</b> Tasks</a><ul>
<li class="chapter" data-level="2.2.1" data-path="tasks.html"><a href="tasks.html#tasks-types"><i class="fa fa-check"></i><b>2.2.1</b> Task Types</a></li>
<li class="chapter" data-level="2.2.2" data-path="tasks.html"><a href="tasks.html#tasks-creation"><i class="fa fa-check"></i><b>2.2.2</b> Task Creation</a></li>
<li class="chapter" data-level="2.2.3" data-path="tasks.html"><a href="tasks.html#tasks-predefined"><i class="fa fa-check"></i><b>2.2.3</b> Predefined tasks</a></li>
<li class="chapter" data-level="2.2.4" data-path="tasks.html"><a href="tasks.html#tasks-api"><i class="fa fa-check"></i><b>2.2.4</b> Task API</a><ul>
<li class="chapter" data-level="2.2.4.1" data-path="tasks.html"><a href="tasks.html#tasks-retrieving"><i class="fa fa-check"></i><b>2.2.4.1</b> Retrieving Data</a></li>
<li class="chapter" data-level="2.2.4.2" data-path="tasks.html"><a href="tasks.html#tasks-roles"><i class="fa fa-check"></i><b>2.2.4.2</b> Roles (Rows and Columns)</a></li>
<li class="chapter" data-level="2.2.4.3" data-path="tasks.html"><a href="tasks.html#tasks-mutators"><i class="fa fa-check"></i><b>2.2.4.3</b> Task Mutators</a></li>
</ul></li>
<li class="chapter" data-level="2.2.5" data-path="tasks.html"><a href="tasks.html#autoplot-task"><i class="fa fa-check"></i><b>2.2.5</b> Plotting Tasks</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="learners.html"><a href="learners.html"><i class="fa fa-check"></i><b>2.3</b> Learners</a><ul>
<li class="chapter" data-level="2.3.1" data-path="learners.html"><a href="learners.html#learners-predefined"><i class="fa fa-check"></i><b>2.3.1</b> Predefined Learners</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="train-predict.html"><a href="train-predict.html"><i class="fa fa-check"></i><b>2.4</b> Train and Predict</a><ul>
<li class="chapter" data-level="2.4.1" data-path="train-predict.html"><a href="train-predict.html#train-predict-objects"><i class="fa fa-check"></i><b>2.4.1</b> Creating Task and Learner Objects</a></li>
<li class="chapter" data-level="2.4.2" data-path="train-predict.html"><a href="train-predict.html#split-data"><i class="fa fa-check"></i><b>2.4.2</b> Setting up the train/test splits of the data</a></li>
<li class="chapter" data-level="2.4.3" data-path="train-predict.html"><a href="train-predict.html#training"><i class="fa fa-check"></i><b>2.4.3</b> Training the learner</a></li>
<li class="chapter" data-level="2.4.4" data-path="train-predict.html"><a href="train-predict.html#predicting"><i class="fa fa-check"></i><b>2.4.4</b> Predicting</a></li>
<li class="chapter" data-level="2.4.5" data-path="train-predict.html"><a href="train-predict.html#predict-type"><i class="fa fa-check"></i><b>2.4.5</b> Changing the Predict Type</a></li>
<li class="chapter" data-level="2.4.6" data-path="train-predict.html"><a href="train-predict.html#autoplot-prediction"><i class="fa fa-check"></i><b>2.4.6</b> Plotting Predictions</a></li>
<li class="chapter" data-level="2.4.7" data-path="train-predict.html"><a href="train-predict.html#measure"><i class="fa fa-check"></i><b>2.4.7</b> Performance assessment</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="resampling.html"><a href="resampling.html"><i class="fa fa-check"></i><b>2.5</b> Resampling</a><ul>
<li class="chapter" data-level="2.5.1" data-path="resampling.html"><a href="resampling.html#resampling-settings"><i class="fa fa-check"></i><b>2.5.1</b> Settings</a></li>
<li class="chapter" data-level="2.5.2" data-path="resampling.html"><a href="resampling.html#resampling-inst"><i class="fa fa-check"></i><b>2.5.2</b> Instantiation</a></li>
<li class="chapter" data-level="2.5.3" data-path="resampling.html"><a href="resampling.html#resampling-exec"><i class="fa fa-check"></i><b>2.5.3</b> Execution</a></li>
<li class="chapter" data-level="2.5.4" data-path="resampling.html"><a href="resampling.html#resamp-custom"><i class="fa fa-check"></i><b>2.5.4</b> Custom resampling</a></li>
<li class="chapter" data-level="2.5.5" data-path="resampling.html"><a href="resampling.html#autoplot-resampleresult"><i class="fa fa-check"></i><b>2.5.5</b> Plotting Resample Results</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="benchmarking.html"><a href="benchmarking.html"><i class="fa fa-check"></i><b>2.6</b> Benchmarking</a><ul>
<li class="chapter" data-level="2.6.1" data-path="benchmarking.html"><a href="benchmarking.html#bm-design"><i class="fa fa-check"></i><b>2.6.1</b> Design Creation</a></li>
<li class="chapter" data-level="2.6.2" data-path="benchmarking.html"><a href="benchmarking.html#bm-exec"><i class="fa fa-check"></i><b>2.6.2</b> Execution and Aggregation of Results</a></li>
<li class="chapter" data-level="2.6.3" data-path="benchmarking.html"><a href="benchmarking.html#autoplot-benchmarkresult"><i class="fa fa-check"></i><b>2.6.3</b> Plotting Benchmark Results</a></li>
<li class="chapter" data-level="2.6.4" data-path="benchmarking.html"><a href="benchmarking.html#bm-resamp"><i class="fa fa-check"></i><b>2.6.4</b> Extracting ResampleResults</a></li>
<li class="chapter" data-level="2.6.5" data-path="benchmarking.html"><a href="benchmarking.html#converting-and-merging-resampleresults"><i class="fa fa-check"></i><b>2.6.5</b> Converting and Merging ResampleResults</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="binary-classification.html"><a href="binary-classification.html"><i class="fa fa-check"></i><b>2.7</b> Binary classification</a><ul>
<li class="chapter" data-level="2.7.1" data-path="binary-classification.html"><a href="binary-classification.html#binary-roc"><i class="fa fa-check"></i><b>2.7.1</b> ROC Curve and Thresholds</a></li>
<li class="chapter" data-level="2.7.2" data-path="binary-classification.html"><a href="binary-classification.html#threshold-tuning"><i class="fa fa-check"></i><b>2.7.2</b> Threshold Tuning</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="optimization.html"><a href="optimization.html"><i class="fa fa-check"></i><b>3</b> Model Optimization</a><ul>
<li class="chapter" data-level="3.1" data-path="tuning.html"><a href="tuning.html"><i class="fa fa-check"></i><b>3.1</b> Hyperparameter Tuning</a><ul>
<li class="chapter" data-level="3.1.1" data-path="tuning.html"><a href="tuning.html#tuning-optimization"><i class="fa fa-check"></i><b>3.1.1</b> The <code>TuningInstance*</code> Classes</a></li>
<li class="chapter" data-level="3.1.2" data-path="tuning.html"><a href="tuning.html#the-tuner-class"><i class="fa fa-check"></i><b>3.1.2</b> The <code>Tuner</code> Class</a></li>
<li class="chapter" data-level="3.1.3" data-path="tuning.html"><a href="tuning.html#tuning-triggering"><i class="fa fa-check"></i><b>3.1.3</b> Triggering the Tuning</a></li>
<li class="chapter" data-level="3.1.4" data-path="tuning.html"><a href="tuning.html#autotuner"><i class="fa fa-check"></i><b>3.1.4</b> Automating the Tuning</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="nested-resampling.html"><a href="nested-resampling.html"><i class="fa fa-check"></i><b>3.2</b> Nested Resampling</a><ul>
<li class="chapter" data-level="3.2.1" data-path="nested-resampling.html"><a href="nested-resampling.html#nested-resamp-exec"><i class="fa fa-check"></i><b>3.2.1</b> Execution</a></li>
<li class="chapter" data-level="3.2.2" data-path="nested-resampling.html"><a href="nested-resampling.html#nested-resamp-eval"><i class="fa fa-check"></i><b>3.2.2</b> Evaluation</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="hyperband.html"><a href="hyperband.html"><i class="fa fa-check"></i><b>3.3</b> Tuning with Hyperband</a></li>
<li class="chapter" data-level="3.4" data-path="fs.html"><a href="fs.html"><i class="fa fa-check"></i><b>3.4</b> Feature Selection / Filtering</a><ul>
<li class="chapter" data-level="3.4.1" data-path="fs.html"><a href="fs.html#fs-filter"><i class="fa fa-check"></i><b>3.4.1</b> Filters</a></li>
<li class="chapter" data-level="3.4.2" data-path="fs.html"><a href="fs.html#fs-calc"><i class="fa fa-check"></i><b>3.4.2</b> Calculating filter values</a></li>
<li class="chapter" data-level="3.4.3" data-path="fs.html"><a href="fs.html#fs-var-imp-filters"><i class="fa fa-check"></i><b>3.4.3</b> Variable Importance Filters</a></li>
<li class="chapter" data-level="3.4.4" data-path="fs.html"><a href="fs.html#fs-ensemble"><i class="fa fa-check"></i><b>3.4.4</b> Ensemble Methods</a></li>
<li class="chapter" data-level="3.4.5" data-path="fs.html"><a href="fs.html#fs-wrapper"><i class="fa fa-check"></i><b>3.4.5</b> Wrapper Methods</a></li>
<li class="chapter" data-level="3.4.6" data-path="fs.html"><a href="fs.html#fs-wrapper-optimization"><i class="fa fa-check"></i><b>3.4.6</b> The <code>FSelectInstance</code> Classes</a></li>
<li class="chapter" data-level="3.4.7" data-path="fs.html"><a href="fs.html#the-fselector-class"><i class="fa fa-check"></i><b>3.4.7</b> The <code>FSelector</code> Class</a></li>
<li class="chapter" data-level="3.4.8" data-path="fs.html"><a href="fs.html#wrapper-selection-triggering"><i class="fa fa-check"></i><b>3.4.8</b> Triggering the Tuning</a></li>
<li class="chapter" data-level="3.4.9" data-path="fs.html"><a href="fs.html#autofselect"><i class="fa fa-check"></i><b>3.4.9</b> Automating the Feature Selection</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="pipelines.html"><a href="pipelines.html"><i class="fa fa-check"></i><b>4</b> Pipelines</a><ul>
<li class="chapter" data-level="4.1" data-path="pipe-pipeops.html"><a href="pipe-pipeops.html"><i class="fa fa-check"></i><b>4.1</b> The Building Blocks: PipeOps</a></li>
<li class="chapter" data-level="4.2" data-path="pipe-operator.html"><a href="pipe-operator.html"><i class="fa fa-check"></i><b>4.2</b> The Pipeline Operator: <code>%&gt;&gt;%</code></a></li>
<li class="chapter" data-level="4.3" data-path="pipe-nodes-edges-graphs.html"><a href="pipe-nodes-edges-graphs.html"><i class="fa fa-check"></i><b>4.3</b> Nodes, Edges and Graphs</a></li>
<li class="chapter" data-level="4.4" data-path="pipe-modeling.html"><a href="pipe-modeling.html"><i class="fa fa-check"></i><b>4.4</b> Modeling</a><ul>
<li class="chapter" data-level="4.4.1" data-path="pipe-modeling.html"><a href="pipe-modeling.html#pipe-hyperpars"><i class="fa fa-check"></i><b>4.4.1</b> Setting Hyperparameters</a></li>
<li class="chapter" data-level="4.4.2" data-path="pipe-modeling.html"><a href="pipe-modeling.html#pipe-tuning"><i class="fa fa-check"></i><b>4.4.2</b> Tuning</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="pipe-nonlinear.html"><a href="pipe-nonlinear.html"><i class="fa fa-check"></i><b>4.5</b> Non-Linear Graphs</a><ul>
<li class="chapter" data-level="4.5.1" data-path="pipe-nonlinear.html"><a href="pipe-nonlinear.html#pipe-model-ensembles-branching-copying"><i class="fa fa-check"></i><b>4.5.1</b> Branching &amp; Copying</a></li>
<li class="chapter" data-level="4.5.2" data-path="pipe-nonlinear.html"><a href="pipe-nonlinear.html#pipe-model-ensembles"><i class="fa fa-check"></i><b>4.5.2</b> Model Ensembles</a><ul>
<li class="chapter" data-level="4.5.2.1" data-path="pipe-nonlinear.html"><a href="pipe-nonlinear.html#pipe-model-ensembles-bagging"><i class="fa fa-check"></i><b>4.5.2.1</b> Bagging</a></li>
<li class="chapter" data-level="4.5.2.2" data-path="pipe-nonlinear.html"><a href="pipe-nonlinear.html#pipe-model-ensembles-stacking"><i class="fa fa-check"></i><b>4.5.2.2</b> Stacking</a></li>
<li class="chapter" data-level="4.5.2.3" data-path="pipe-nonlinear.html"><a href="pipe-nonlinear.html#multilevel-stacking"><i class="fa fa-check"></i><b>4.5.2.3</b> Multilevel Stacking</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="pipe-special-ops.html"><a href="pipe-special-ops.html"><i class="fa fa-check"></i><b>4.6</b> Special Operators</a><ul>
<li class="chapter" data-level="4.6.1" data-path="pipe-special-ops.html"><a href="pipe-special-ops.html#imputation-pipeopimpute"><i class="fa fa-check"></i><b>4.6.1</b> Imputation: <code>PipeOpImpute</code></a></li>
<li class="chapter" data-level="4.6.2" data-path="pipe-special-ops.html"><a href="pipe-special-ops.html#feature-engineering-pipeopmutate"><i class="fa fa-check"></i><b>4.6.2</b> Feature Engineering: <code>PipeOpMutate</code></a></li>
<li class="chapter" data-level="4.6.3" data-path="pipe-special-ops.html"><a href="pipe-special-ops.html#training-on-data-subsets-pipeopchunk"><i class="fa fa-check"></i><b>4.6.3</b> Training on data subsets: <code>PipeOpChunk</code></a></li>
<li class="chapter" data-level="4.6.4" data-path="pipe-special-ops.html"><a href="pipe-special-ops.html#feature-selection-pipeopfilter-and-pipeopselect"><i class="fa fa-check"></i><b>4.6.4</b> Feature Selection: <code>PipeOpFilter</code> and <code>PipeOpSelect</code></a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html"><i class="fa fa-check"></i><b>4.7</b> In-depth look into mlr3pipelines</a><ul>
<li class="chapter" data-level="4.7.1" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#whats-the-point"><i class="fa fa-check"></i><b>4.7.1</b> What’s the Point</a></li>
<li class="chapter" data-level="4.7.2" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#pipeop-pipeline-operators"><i class="fa fa-check"></i><b>4.7.2</b> <code>PipeOp</code>: Pipeline Operators</a><ul>
<li class="chapter" data-level="4.7.2.1" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#why-the-state"><i class="fa fa-check"></i><b>4.7.2.1</b> Why the <code>$state</code></a></li>
<li class="chapter" data-level="4.7.2.2" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#where-to-get-pipeops"><i class="fa fa-check"></i><b>4.7.2.2</b> Where to Get <code>PipeOp</code>s</a></li>
</ul></li>
<li class="chapter" data-level="4.7.3" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#pipeop-channels"><i class="fa fa-check"></i><b>4.7.3</b> PipeOp Channels</a><ul>
<li class="chapter" data-level="4.7.3.1" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#input-channels"><i class="fa fa-check"></i><b>4.7.3.1</b> Input Channels</a></li>
<li class="chapter" data-level="4.7.3.2" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#output-channels"><i class="fa fa-check"></i><b>4.7.3.2</b> Output Channels</a></li>
<li class="chapter" data-level="4.7.3.3" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#channel-configuration"><i class="fa fa-check"></i><b>4.7.3.3</b> Channel Configuration</a></li>
</ul></li>
<li class="chapter" data-level="4.7.4" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#graph-networks-of-pipeops"><i class="fa fa-check"></i><b>4.7.4</b> <code>Graph</code>: Networks of <code>PipeOp</code>s</a><ul>
<li class="chapter" data-level="4.7.4.1" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#basics-1"><i class="fa fa-check"></i><b>4.7.4.1</b> Basics</a></li>
<li class="chapter" data-level="4.7.4.2" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#networks"><i class="fa fa-check"></i><b>4.7.4.2</b> Networks</a></li>
<li class="chapter" data-level="4.7.4.3" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#syntactic-sugar"><i class="fa fa-check"></i><b>4.7.4.3</b> Syntactic Sugar</a></li>
<li class="chapter" data-level="4.7.4.4" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#pipeop-ids-and-id-name-clashes"><i class="fa fa-check"></i><b>4.7.4.4</b> <code>PipeOp</code> IDs and ID Name Clashes</a></li>
</ul></li>
<li class="chapter" data-level="4.7.5" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#learners-in-graphs-graphs-in-learners"><i class="fa fa-check"></i><b>4.7.5</b> Learners in Graphs, Graphs in Learners</a><ul>
<li class="chapter" data-level="4.7.5.1" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#pipeoplearner"><i class="fa fa-check"></i><b>4.7.5.1</b> <code>PipeOpLearner</code></a></li>
<li class="chapter" data-level="4.7.5.2" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#graphlearner"><i class="fa fa-check"></i><b>4.7.5.2</b> <code>GraphLearner</code></a></li>
</ul></li>
<li class="chapter" data-level="4.7.6" data-path="in-depth-pipelines.html"><a href="in-depth-pipelines.html#hyperparameters"><i class="fa fa-check"></i><b>4.7.6</b> Hyperparameters</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="technical.html"><a href="technical.html"><i class="fa fa-check"></i><b>5</b> Technical</a><ul>
<li class="chapter" data-level="5.1" data-path="parallelization.html"><a href="parallelization.html"><i class="fa fa-check"></i><b>5.1</b> Parallelization</a><ul>
<li class="chapter" data-level="5.1.1" data-path="parallelization.html"><a href="parallelization.html#nested-resampling-parallelization"><i class="fa fa-check"></i><b>5.1.1</b> Nested Resampling Parallelization</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="error-handling.html"><a href="error-handling.html"><i class="fa fa-check"></i><b>5.2</b> Error Handling</a><ul>
<li class="chapter" data-level="5.2.1" data-path="error-handling.html"><a href="error-handling.html#encapsulation"><i class="fa fa-check"></i><b>5.2.1</b> Encapsulation</a></li>
<li class="chapter" data-level="5.2.2" data-path="error-handling.html"><a href="error-handling.html#fallback-learners"><i class="fa fa-check"></i><b>5.2.2</b> Fallback learners</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="backends.html"><a href="backends.html"><i class="fa fa-check"></i><b>5.3</b> Database Backends</a><ul>
<li class="chapter" data-level="5.3.1" data-path="backends.html"><a href="backends.html#use-case-nyc-flights"><i class="fa fa-check"></i><b>5.3.1</b> Use Case: NYC Flights</a></li>
<li class="chapter" data-level="5.3.2" data-path="backends.html"><a href="backends.html#preprocessing-with-dplyr"><i class="fa fa-check"></i><b>5.3.2</b> Preprocessing with <code>dplyr</code></a></li>
<li class="chapter" data-level="5.3.3" data-path="backends.html"><a href="backends.html#databackenddplyr"><i class="fa fa-check"></i><b>5.3.3</b> DataBackendDplyr</a></li>
<li class="chapter" data-level="5.3.4" data-path="backends.html"><a href="backends.html#model-fitting"><i class="fa fa-check"></i><b>5.3.4</b> Model fitting</a></li>
<li class="chapter" data-level="5.3.5" data-path="backends.html"><a href="backends.html#cleanup"><i class="fa fa-check"></i><b>5.3.5</b> Cleanup</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="paradox.html"><a href="paradox.html"><i class="fa fa-check"></i><b>5.4</b> Parameters (using <code>paradox</code>)</a><ul>
<li class="chapter" data-level="5.4.1" data-path="paradox.html"><a href="paradox.html#reference-based-objects"><i class="fa fa-check"></i><b>5.4.1</b> Reference Based Objects</a></li>
<li class="chapter" data-level="5.4.2" data-path="paradox.html"><a href="paradox.html#defining-a-parameter-space"><i class="fa fa-check"></i><b>5.4.2</b> Defining a Parameter Space</a><ul>
<li class="chapter" data-level="5.4.2.1" data-path="paradox.html"><a href="paradox.html#single-parameters"><i class="fa fa-check"></i><b>5.4.2.1</b> Single Parameters</a></li>
<li class="chapter" data-level="5.4.2.2" data-path="paradox.html"><a href="paradox.html#parameter-sets"><i class="fa fa-check"></i><b>5.4.2.2</b> Parameter Sets</a></li>
<li class="chapter" data-level="5.4.2.3" data-path="paradox.html"><a href="paradox.html#vector-parameters"><i class="fa fa-check"></i><b>5.4.2.3</b> Vector Parameters</a></li>
</ul></li>
<li class="chapter" data-level="5.4.3" data-path="paradox.html"><a href="paradox.html#parameter-sampling"><i class="fa fa-check"></i><b>5.4.3</b> Parameter Sampling</a><ul>
<li class="chapter" data-level="5.4.3.1" data-path="paradox.html"><a href="paradox.html#parameter-designs"><i class="fa fa-check"></i><b>5.4.3.1</b> Parameter Designs</a></li>
<li class="chapter" data-level="5.4.3.2" data-path="paradox.html"><a href="paradox.html#grid-design"><i class="fa fa-check"></i><b>5.4.3.2</b> Grid Design</a></li>
<li class="chapter" data-level="5.4.3.3" data-path="paradox.html"><a href="paradox.html#random-sampling"><i class="fa fa-check"></i><b>5.4.3.3</b> Random Sampling</a></li>
<li class="chapter" data-level="5.4.3.4" data-path="paradox.html"><a href="paradox.html#generalized-sampling-the-sampler-class"><i class="fa fa-check"></i><b>5.4.3.4</b> Generalized Sampling: The <code>Sampler</code> Class</a></li>
</ul></li>
<li class="chapter" data-level="5.4.4" data-path="paradox.html"><a href="paradox.html#parameter-transformation"><i class="fa fa-check"></i><b>5.4.4</b> Parameter Transformation</a><ul>
<li class="chapter" data-level="5.4.4.1" data-path="paradox.html"><a href="paradox.html#transformation-between-types"><i class="fa fa-check"></i><b>5.4.4.1</b> Transformation between Types</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="logging.html"><a href="logging.html"><i class="fa fa-check"></i><b>5.5</b> Logging</a><ul>
<li class="chapter" data-level="5.5.1" data-path="logging.html"><a href="logging.html#changing-mlr3-logging-levels"><i class="fa fa-check"></i><b>5.5.1</b> Changing mlr3 logging levels</a></li>
<li class="chapter" data-level="5.5.2" data-path="logging.html"><a href="logging.html#redirecting-output"><i class="fa fa-check"></i><b>5.5.2</b> Redirecting output</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="extending.html"><a href="extending.html"><i class="fa fa-check"></i><b>6</b> Extending</a><ul>
<li class="chapter" data-level="6.1" data-path="extending-learners.html"><a href="extending-learners.html"><i class="fa fa-check"></i><b>6.1</b> Adding new Learners</a><ul>
<li class="chapter" data-level="6.1.1" data-path="extending-learners.html"><a href="extending-learners.html#create-learner"><i class="fa fa-check"></i><b>6.1.1</b> Calling create_learner</a></li>
<li class="chapter" data-level="6.1.2" data-path="extending-learners.html"><a href="extending-learners.html#learner_package_type_key.r"><i class="fa fa-check"></i><b>6.1.2</b> learner_package_type_key.R</a></li>
<li class="chapter" data-level="6.1.3" data-path="extending-learners.html"><a href="extending-learners.html#learner-meta-information"><i class="fa fa-check"></i><b>6.1.3</b> Meta-information</a></li>
<li class="chapter" data-level="6.1.4" data-path="extending-learners.html"><a href="extending-learners.html#param-set"><i class="fa fa-check"></i><b>6.1.4</b> ParamSet</a></li>
<li class="chapter" data-level="6.1.5" data-path="extending-learners.html"><a href="extending-learners.html#learner-train"><i class="fa fa-check"></i><b>6.1.5</b> Train function</a></li>
<li class="chapter" data-level="6.1.6" data-path="extending-learners.html"><a href="extending-learners.html#learner-predict"><i class="fa fa-check"></i><b>6.1.6</b> Predict function</a></li>
<li class="chapter" data-level="6.1.7" data-path="extending-learners.html"><a href="extending-learners.html#learner-control"><i class="fa fa-check"></i><b>6.1.7</b> Control objects/functions of learners</a></li>
<li class="chapter" data-level="6.1.8" data-path="extending-learners.html"><a href="extending-learners.html#learner-test"><i class="fa fa-check"></i><b>6.1.8</b> Testing the learner</a><ul>
<li class="chapter" data-level="6.1.8.1" data-path="extending-learners.html"><a href="extending-learners.html#learner-test-manual"><i class="fa fa-check"></i><b>6.1.8.1</b> Train and Predict</a></li>
<li class="chapter" data-level="6.1.8.2" data-path="extending-learners.html"><a href="extending-learners.html#learner-test-unit"><i class="fa fa-check"></i><b>6.1.8.2</b> Autotest</a></li>
<li class="chapter" data-level="6.1.8.3" data-path="extending-learners.html"><a href="extending-learners.html#learner-test-parameter"><i class="fa fa-check"></i><b>6.1.8.3</b> Checking Parameters</a></li>
</ul></li>
<li class="chapter" data-level="6.1.9" data-path="extending-learners.html"><a href="extending-learners.html#cleaning"><i class="fa fa-check"></i><b>6.1.9</b> Package Cleaning</a></li>
<li class="chapter" data-level="6.1.10" data-path="extending-learners.html"><a href="extending-learners.html#thanks-and-maintenance"><i class="fa fa-check"></i><b>6.1.10</b> Thanks and Maintenance</a></li>
<li class="chapter" data-level="6.1.11" data-path="extending-learners.html"><a href="extending-learners.html#learner-faq"><i class="fa fa-check"></i><b>6.1.11</b> Learner FAQ</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="extending-measures.html"><a href="extending-measures.html"><i class="fa fa-check"></i><b>6.2</b> Adding new Measures</a></li>
<li class="chapter" data-level="6.3" data-path="extending-pipeops.html"><a href="extending-pipeops.html"><i class="fa fa-check"></i><b>6.3</b> Adding new PipeOps</a><ul>
<li class="chapter" data-level="6.3.1" data-path="extending-pipeops.html"><a href="extending-pipeops.html#ext-pipeopcopy"><i class="fa fa-check"></i><b>6.3.1</b> General Case Example: <code>PipeOpCopy</code></a><ul>
<li class="chapter" data-level="6.3.1.1" data-path="extending-pipeops.html"><a href="extending-pipeops.html#first-steps-inheriting-from-pipeop"><i class="fa fa-check"></i><b>6.3.1.1</b> First Steps: Inheriting from <code>PipeOp</code></a></li>
<li class="chapter" data-level="6.3.1.2" data-path="extending-pipeops.html"><a href="extending-pipeops.html#channel-definitions"><i class="fa fa-check"></i><b>6.3.1.2</b> Channel Definitions</a></li>
<li class="chapter" data-level="6.3.1.3" data-path="extending-pipeops.html"><a href="extending-pipeops.html#train-and-predict"><i class="fa fa-check"></i><b>6.3.1.3</b> Train and Predict</a></li>
<li class="chapter" data-level="6.3.1.4" data-path="extending-pipeops.html"><a href="extending-pipeops.html#putting-it-together"><i class="fa fa-check"></i><b>6.3.1.4</b> Putting it Together</a></li>
</ul></li>
<li class="chapter" data-level="6.3.2" data-path="extending-pipeops.html"><a href="extending-pipeops.html#ext-pipe-preproc"><i class="fa fa-check"></i><b>6.3.2</b> Special Case: Preprocessing</a><ul>
<li class="chapter" data-level="6.3.2.1" data-path="extending-pipeops.html"><a href="extending-pipeops.html#example-pipeopdropna"><i class="fa fa-check"></i><b>6.3.2.1</b> Example: <code>PipeOpDropNA</code></a></li>
<li class="chapter" data-level="6.3.2.2" data-path="extending-pipeops.html"><a href="extending-pipeops.html#example-pipeopscalealways"><i class="fa fa-check"></i><b>6.3.2.2</b> Example: <code>PipeOpScaleAlways</code></a></li>
</ul></li>
<li class="chapter" data-level="6.3.3" data-path="extending-pipeops.html"><a href="extending-pipeops.html#special-case-preprocessing-with-simple-train"><i class="fa fa-check"></i><b>6.3.3</b> Special Case: Preprocessing with Simple Train</a><ul>
<li class="chapter" data-level="6.3.3.1" data-path="extending-pipeops.html"><a href="extending-pipeops.html#example-pipeopdropconst"><i class="fa fa-check"></i><b>6.3.3.1</b> Example: <code>PipeOpDropConst</code></a></li>
<li class="chapter" data-level="6.3.3.2" data-path="extending-pipeops.html"><a href="extending-pipeops.html#example-pipeopscalealwayssimple"><i class="fa fa-check"></i><b>6.3.3.2</b> Example: <code>PipeOpScaleAlwaysSimple</code></a></li>
</ul></li>
<li class="chapter" data-level="6.3.4" data-path="extending-pipeops.html"><a href="extending-pipeops.html#ext-pipe-hyperpars"><i class="fa fa-check"></i><b>6.3.4</b> Hyperparameters</a><ul>
<li class="chapter" data-level="6.3.4.1" data-path="extending-pipeops.html"><a href="extending-pipeops.html#hyperparameter-example-pipeopscale"><i class="fa fa-check"></i><b>6.3.4.1</b> Hyperparameter Example: <code>PipeOpScale</code></a></li>
</ul></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="special-tasks.html"><a href="special-tasks.html"><i class="fa fa-check"></i><b>7</b> Special Tasks</a><ul>
<li class="chapter" data-level="7.1" data-path="survival.html"><a href="survival.html"><i class="fa fa-check"></i><b>7.1</b> Survival Analysis</a><ul>
<li class="chapter" data-level="7.1.1" data-path="survival.html"><a href="survival.html#tasksurv"><i class="fa fa-check"></i><b>7.1.1</b> TaskSurv</a></li>
<li class="chapter" data-level="7.1.2" data-path="survival.html"><a href="survival.html#predict-types---crank-lp-and-distr"><i class="fa fa-check"></i><b>7.1.2</b> Predict Types - crank, lp, and distr</a></li>
<li class="chapter" data-level="7.1.3" data-path="survival.html"><a href="survival.html#composition"><i class="fa fa-check"></i><b>7.1.3</b> Composition</a></li>
<li class="chapter" data-level="7.1.4" data-path="survival.html"><a href="survival.html#benchmark-experiment"><i class="fa fa-check"></i><b>7.1.4</b> Benchmark Experiment</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="density.html"><a href="density.html"><i class="fa fa-check"></i><b>7.2</b> Density Estimation</a><ul>
<li class="chapter" data-level="7.2.1" data-path="density.html"><a href="density.html#train-and-predict-1"><i class="fa fa-check"></i><b>7.2.1</b> Train and Predict</a></li>
<li class="chapter" data-level="7.2.2" data-path="density.html"><a href="density.html#benchmark-experiment-1"><i class="fa fa-check"></i><b>7.2.2</b> Benchmark Experiment</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="spatiotemporal.html"><a href="spatiotemporal.html"><i class="fa fa-check"></i><b>7.3</b> Spatiotemporal Analysis</a><ul>
<li class="chapter" data-level="7.3.1" data-path="spatiotemporal.html"><a href="spatiotemporal.html#spatiotemporal-intro"><i class="fa fa-check"></i><b>7.3.1</b> Autocorrelation</a></li>
<li class="chapter" data-level="7.3.2" data-path="spatiotemporal.html"><a href="spatiotemporal.html#sp-vs-nsp-cv"><i class="fa fa-check"></i><b>7.3.2</b> Spatial CV vs. Non-Spatial CV</a><ul>
<li class="chapter" data-level="7.3.2.1" data-path="spatiotemporal.html"><a href="spatiotemporal.html#nsp-cv"><i class="fa fa-check"></i><b>7.3.2.1</b> Non-Spatial CV</a></li>
<li class="chapter" data-level="7.3.2.2" data-path="spatiotemporal.html"><a href="spatiotemporal.html#sp-cv"><i class="fa fa-check"></i><b>7.3.2.2</b> Spatial CV</a></li>
<li class="chapter" data-level="7.3.2.3" data-path="spatiotemporal.html"><a href="spatiotemporal.html#vis-spt-partitions"><i class="fa fa-check"></i><b>7.3.2.3</b> Visualization of Spatiotemporal Partitions</a></li>
</ul></li>
<li class="chapter" data-level="7.3.3" data-path="spatiotemporal.html"><a href="spatiotemporal.html#choose-spt-rsmp"><i class="fa fa-check"></i><b>7.3.3</b> Choosing a Resampling Method</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="ordinal.html"><a href="ordinal.html"><i class="fa fa-check"></i><b>7.4</b> Ordinal Analysis</a></li>
<li class="chapter" data-level="7.5" data-path="functional.html"><a href="functional.html"><i class="fa fa-check"></i><b>7.5</b> Functional Analysis</a><ul>
<li class="chapter" data-level="7.5.1" data-path="functional.html"><a href="functional.html#how-to-model-functional-data"><i class="fa fa-check"></i><b>7.5.1</b> How to model functional data?</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="multilabel.html"><a href="multilabel.html"><i class="fa fa-check"></i><b>7.6</b> Multilabel Classification</a></li>
<li class="chapter" data-level="7.7" data-path="cost-sens.html"><a href="cost-sens.html"><i class="fa fa-check"></i><b>7.7</b> Cost-Sensitive Classification</a><ul>
<li class="chapter" data-level="7.7.1" data-path="cost-sens.html"><a href="cost-sens.html#a-first-model"><i class="fa fa-check"></i><b>7.7.1</b> A First Model</a></li>
<li class="chapter" data-level="7.7.2" data-path="cost-sens.html"><a href="cost-sens.html#cost-sensitive-measure"><i class="fa fa-check"></i><b>7.7.2</b> Cost-sensitive Measure</a></li>
<li class="chapter" data-level="7.7.3" data-path="cost-sens.html"><a href="cost-sens.html#thresholding"><i class="fa fa-check"></i><b>7.7.3</b> Thresholding</a></li>
<li class="chapter" data-level="7.7.4" data-path="cost-sens.html"><a href="cost-sens.html#threshold-tuning-1"><i class="fa fa-check"></i><b>7.7.4</b> Threshold Tuning</a></li>
<li class="chapter" data-level="7.7.5" data-path="cost-sens.html"><a href="cost-sens.html#adjusting-thresholds-two-strategies"><i class="fa fa-check"></i><b>7.7.5</b> Adjusting thresholds: Two strategies</a></li>
<li class="chapter" data-level="7.7.6" data-path="cost-sens.html"><a href="cost-sens.html#pipeopthreshold"><i class="fa fa-check"></i><b>7.7.6</b> PipeOpThreshold</a></li>
<li class="chapter" data-level="7.7.7" data-path="cost-sens.html"><a href="cost-sens.html#pipeoptunethreshold"><i class="fa fa-check"></i><b>7.7.7</b> PipeOpTunethreshold</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="interpretation.html"><a href="interpretation.html"><i class="fa fa-check"></i><b>8</b> Model Interpretation</a><ul>
<li class="chapter" data-level="8.1" data-path="iml.html"><a href="iml.html"><i class="fa fa-check"></i><b>8.1</b> IML</a><ul>
<li class="chapter" data-level="8.1.1" data-path="iml.html"><a href="iml.html#penguin-task"><i class="fa fa-check"></i><b>8.1.1</b> Penguin Task</a></li>
<li class="chapter" data-level="8.1.2" data-path="iml.html"><a href="iml.html#featureeffects"><i class="fa fa-check"></i><b>8.1.2</b> FeatureEffects</a></li>
<li class="chapter" data-level="8.1.3" data-path="iml.html"><a href="iml.html#shapley"><i class="fa fa-check"></i><b>8.1.3</b> Shapley</a></li>
<li class="chapter" data-level="8.1.4" data-path="iml.html"><a href="iml.html#featureimp"><i class="fa fa-check"></i><b>8.1.4</b> FeatureImp</a></li>
<li class="chapter" data-level="8.1.5" data-path="iml.html"><a href="iml.html#independent-test-data"><i class="fa fa-check"></i><b>8.1.5</b> Independent Test Data</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="dalex.html"><a href="dalex.html"><i class="fa fa-check"></i><b>8.2</b> DALEX</a><ul>
<li class="chapter" data-level="8.2.1" data-path="dalex.html"><a href="dalex.html#interpretability-dalex-introduction"><i class="fa fa-check"></i><b>8.2.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2.2" data-path="dalex.html"><a href="dalex.html#interpretability-data-fifa"><i class="fa fa-check"></i><b>8.2.2</b> Read data: FIFA</a></li>
<li class="chapter" data-level="8.2.3" data-path="dalex.html"><a href="dalex.html#interpretability-train-ranger"><i class="fa fa-check"></i><b>8.2.3</b> Train a model: Ranger</a></li>
<li class="chapter" data-level="8.2.4" data-path="dalex.html"><a href="dalex.html#interpretability-architecture"><i class="fa fa-check"></i><b>8.2.4</b> The general workflow</a></li>
<li class="chapter" data-level="8.2.5" data-path="dalex.html"><a href="dalex.html#interpretability-dataset-level"><i class="fa fa-check"></i><b>8.2.5</b> Dataset level exploration</a></li>
<li class="chapter" data-level="8.2.6" data-path="dalex.html"><a href="dalex.html#interpretability-instance-level"><i class="fa fa-check"></i><b>8.2.6</b> Instance level explanation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>9</b> Appendix</a><ul>
<li class="chapter" data-level="9.1" data-path="list-learners.html"><a href="list-learners.html"><i class="fa fa-check"></i><b>9.1</b> Integrated Learners</a></li>
<li class="chapter" data-level="9.2" data-path="list-measures.html"><a href="list-measures.html"><i class="fa fa-check"></i><b>9.2</b> Integrated Performance Measures</a></li>
<li class="chapter" data-level="9.3" data-path="list-filters.html"><a href="list-filters.html"><i class="fa fa-check"></i><b>9.3</b> Integrated Filter Methods</a><ul>
<li class="chapter" data-level="9.3.1" data-path="list-filters.html"><a href="list-filters.html#fs-filter-list"><i class="fa fa-check"></i><b>9.3.1</b> Standalone filter methods</a></li>
<li class="chapter" data-level="9.3.2" data-path="list-filters.html"><a href="list-filters.html#fs-filter-embedded-list"><i class="fa fa-check"></i><b>9.3.2</b> Learners With Embedded Filter Methods</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="list-pipeops.html"><a href="list-pipeops.html"><i class="fa fa-check"></i><b>9.4</b> Integrated Pipe Operators</a></li>
<li class="chapter" data-level="9.5" data-path="compare-frameworks.html"><a href="compare-frameworks.html"><i class="fa fa-check"></i><b>9.5</b> Framework Comparison</a><ul>
<li class="chapter" data-level="9.5.1" data-path="compare-frameworks.html"><a href="compare-frameworks.html#an-introduction-to-pipeops"><i class="fa fa-check"></i><b>9.5.1</b> An introduction to “PipeOp”s</a><ul>
<li class="chapter" data-level="9.5.1.1" data-path="compare-frameworks.html"><a href="compare-frameworks.html#a-quick-glance-into-a-pipeop"><i class="fa fa-check"></i><b>9.5.1.1</b> A quick glance into a PipeOp</a></li>
<li class="chapter" data-level="9.5.1.2" data-path="compare-frameworks.html"><a href="compare-frameworks.html#constructing-the-pipeline"><i class="fa fa-check"></i><b>9.5.1.2</b> Constructing the Pipeline</a></li>
</ul></li>
<li class="chapter" data-level="9.5.2" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr3pipelines-vs.-mlr"><i class="fa fa-check"></i><b>9.5.2</b> mlr3pipelines vs. mlr</a><ul>
<li class="chapter" data-level="9.5.2.1" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr"><i class="fa fa-check"></i><b>9.5.2.1</b> mlr</a></li>
<li class="chapter" data-level="9.5.2.2" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr3pipelines"><i class="fa fa-check"></i><b>9.5.2.2</b> mlr3pipelines</a></li>
</ul></li>
<li class="chapter" data-level="9.5.3" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr3pipelines-vs.-sklearn.pipeline.pipeline"><i class="fa fa-check"></i><b>9.5.3</b> mlr3pipelines vs. sklearn.pipeline.Pipeline</a><ul>
<li class="chapter" data-level="9.5.3.1" data-path="compare-frameworks.html"><a href="compare-frameworks.html#sklearn"><i class="fa fa-check"></i><b>9.5.3.1</b> sklearn</a></li>
<li class="chapter" data-level="9.5.3.2" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr3pipelines-1"><i class="fa fa-check"></i><b>9.5.3.2</b> mlr3pipelines</a></li>
</ul></li>
<li class="chapter" data-level="9.5.4" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr3pipelines-vs-recipes"><i class="fa fa-check"></i><b>9.5.4</b> mlr3pipelines vs recipes</a><ul>
<li class="chapter" data-level="9.5.4.1" data-path="compare-frameworks.html"><a href="compare-frameworks.html#recipes"><i class="fa fa-check"></i><b>9.5.4.1</b> recipes</a></li>
<li class="chapter" data-level="9.5.4.2" data-path="compare-frameworks.html"><a href="compare-frameworks.html#mlr3pipelines-2"><i class="fa fa-check"></i><b>9.5.4.2</b> mlr3pipelines</a></li>
</ul></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">mlr3 book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="extending-learners" class="section level2">
<h2><span class="header-section-number">6.1</span> Adding new Learners</h2>
<p>Here, we show how to create a custom mlr3learner step-by-step using <a href="https://www.rdocumentation.org/packages/mlr3extralearners/topics/create_learner"><code>mlr3extralearners::create_learner</code></a>.</p>
<p>This section gives insights on how a mlr3learner is constructed and how to troubleshoot issues.
See the <a href="extending-learners.html#learner-faq">Learner FAQ subsection</a> for help.</p>
<p><strong>Summary of steps for adding a new learner</strong></p>
<ol style="list-style-type: decimal">
<li>Check the learner does not already exist <a href="https://mlr3extralearners.mlr-org.com/articles/learners/list_learners.html">here</a>.</li>
<li>(Install <code>mlr3extralearners</code> from GitHub: <code>remotes::install_github("mlr-org/mlr3extralearners")</code>.)</li>
<li><a href="extending-learners.html#create-learner">Run</a> <a href="https://www.rdocumentation.org/packages/mlr3extralearners/topics/create_learner"><code>mlr3extralearners::create_learner</code></a>.</li>
<li>Add the learner <a href="extending-learners.html#param-set"><code>param_set</code></a>.</li>
<li>Manually add <a href="extending-learners.html#learner-train"><code>.train</code></a> and <a href="extending-learners.html#learner-predict"><code>.predict</code></a> private methods to the learner.</li>
<li>If applicable add <code>importance</code> and <code>oob_error</code> public methods to the learner.</li>
<li>If applicable add references to the learner.</li>
<li>Check <a href="extending-learners.html#learner-test">unit tests</a> and <a href="extending-learners.html#learner-test">paramtests</a> pass (these are automatically created).</li>
<li>Run <a href="extending-learners.html#cleaning">cleaning functions</a></li>
<li>Open a <a href="https://github.com/mlr-org/mlr3extralearners/pulls">pull request</a> with the new learner template.</li>
</ol>
<p><strong>(Do not copy/paste the code shown in this section. Use the create_learner to start.)</strong></p>
<div id="create-learner" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Calling create_learner</h3>
<p>The learner <code>classif.rpart</code> will be used as a running example throughout this section.</p>
<div class="sourceCode" id="cb585"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb585-1"><a href="extending-learners.html#cb585-1"></a><span class="kw">library</span>(mlr3extralearners)</span>
<span id="cb585-2"><a href="extending-learners.html#cb585-2"></a><span class="kw">create_learner</span>(</span>
<span id="cb585-3"><a href="extending-learners.html#cb585-3"></a>  <span class="dt">pkg =</span> <span class="st">&quot;.&quot;</span>,</span>
<span id="cb585-4"><a href="extending-learners.html#cb585-4"></a>  <span class="dt">classname =</span> <span class="st">&quot;Rpart&quot;</span>,</span>
<span id="cb585-5"><a href="extending-learners.html#cb585-5"></a>  <span class="dt">algorithm =</span> <span class="st">&quot;decision tree&quot;</span>,</span>
<span id="cb585-6"><a href="extending-learners.html#cb585-6"></a>  <span class="dt">type =</span> <span class="st">&quot;classif&quot;</span>,</span>
<span id="cb585-7"><a href="extending-learners.html#cb585-7"></a>  <span class="dt">key =</span> <span class="st">&quot;rpart&quot;</span>,</span>
<span id="cb585-8"><a href="extending-learners.html#cb585-8"></a>  <span class="dt">package =</span> <span class="st">&quot;rpart&quot;</span>,</span>
<span id="cb585-9"><a href="extending-learners.html#cb585-9"></a>  <span class="dt">caller =</span> <span class="st">&quot;rpart&quot;</span>,</span>
<span id="cb585-10"><a href="extending-learners.html#cb585-10"></a>  <span class="dt">feature_types =</span> <span class="kw">c</span>(<span class="st">&quot;logical&quot;</span>, <span class="st">&quot;integer&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;factor&quot;</span>, <span class="st">&quot;ordered&quot;</span>),</span>
<span id="cb585-11"><a href="extending-learners.html#cb585-11"></a>  <span class="dt">predict_types =</span> <span class="kw">c</span>(<span class="st">&quot;response&quot;</span>, <span class="st">&quot;prob&quot;</span>),</span>
<span id="cb585-12"><a href="extending-learners.html#cb585-12"></a>  <span class="dt">properties =</span> <span class="kw">c</span>(<span class="st">&quot;importance&quot;</span>, <span class="st">&quot;missings&quot;</span>, <span class="st">&quot;multiclass&quot;</span>, <span class="st">&quot;selected_features&quot;</span>, <span class="st">&quot;twoclass&quot;</span>, <span class="st">&quot;weights&quot;</span>),</span>
<span id="cb585-13"><a href="extending-learners.html#cb585-13"></a>  <span class="dt">references =</span> <span class="ot">TRUE</span>,</span>
<span id="cb585-14"><a href="extending-learners.html#cb585-14"></a>  <span class="dt">gh_name =</span> <span class="st">&quot;RaphaelS1&quot;</span></span>
<span id="cb585-15"><a href="extending-learners.html#cb585-15"></a>)</span></code></pre></div>
<p>The full documentation for the function arguments is in <a href="https://www.rdocumentation.org/packages/mlr3extralearners/topics/create_learner"><code>mlr3extralearners::create_learner</code></a>, in this example we are doing the following:</p>
<ol style="list-style-type: decimal">
<li><code>pkg = "."</code> - Set the package root to the current directory.</li>
<li><code>classname = "Rpart"</code> - Set the R6 class name to LearnerClassifRpart (classif is below)</li>
<li><code>algorithm = "decision tree"</code> - Create the title as “Classification Decision Tree Learner”, where “Classification” is determined automatically from <code>type</code> and “Learner” is added for all learners.</li>
<li><code>type = "classif"</code> - Setting the learner as a classification learner, automatically filling the title, class name, id (“classif.rpart”) and task type.</li>
<li><code>key = "rpart"</code> - Used with <code>type</code> to create the unique ID of the learner, <code>classif.rpart</code>.</li>
<li><code>package = "rpart"</code> - Setting the package from which the learner is implemented, this fills in things like the training function (along with <code>caller</code>) and the <code>man</code> field.</li>
<li><code>caller = "rpart"</code> - This tells the <code>.train</code> function, and the description which function is called to run the algorithm, with <code>package</code> this automatically fills <code>rpart::rpart</code>.</li>
<li><code>feature_types = c("logical", "integer", "numeric", "factor", "ordered")</code> - Sets the type of features that can be handled by the learner. See <a href="extending-learners.html#learner-meta-information">meta information</a>.</li>
<li><code>predict_types = c("response", "prob"),</code> - Sets the possible prediction types as response (deterministic) and prob (probabilistic). See <a href="extending-learners.html#learner-meta-information">meta information</a>.</li>
<li><code>properties = c("importance", "missings", "multiclass", "selected_features", "twoclass", "weights")</code> - Sets the properties that are handled by the learner, by including <code>"importance"</code> a public method called <code>importance</code> will be created that must be manually filled. See <a href="extending-learners.html#learner-meta-information">meta information</a>.</li>
<li><code>references = TRUE</code> - Tells the template to add a “references” tag that must be filled manually.</li>
<li><code>gh_name = "RaphaelS1"</code> - Fills the “author” tag with my GitHub handle, this is required as it identifies the maintainer of the learner.</li>
</ol>
<p>The sections below demonstrate what happens after the function has been run and the files that are created.</p>
</div>
<div id="learner_package_type_key.r" class="section level3">
<h3><span class="header-section-number">6.1.2</span> learner_package_type_key.R</h3>
<p>The first script to complete after running <code>create_learner</code> is the file with the form <code>learner_package_type_key.R</code>, in our case this will actually be <code>learner_rpart_classif_rpart.key</code>. <strong>This name must not be changed</strong> as triggering automated tests rely on a strict naming scheme. For our example, the resulting script looks like this:</p>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb586-1"><a href="extending-learners.html#cb586-1"></a><span class="co">#&#39; @title Classification Decision Tree Learner</span></span>
<span id="cb586-2"><a href="extending-learners.html#cb586-2"></a><span class="co">#&#39; @author RaphaelS1</span></span>
<span id="cb586-3"><a href="extending-learners.html#cb586-3"></a><span class="co">#&#39; @name mlr_learners_classif.rpart</span></span>
<span id="cb586-4"><a href="extending-learners.html#cb586-4"></a><span class="co">#&#39;</span></span>
<span id="cb586-5"><a href="extending-learners.html#cb586-5"></a><span class="co">#&#39; @template class_learner</span></span>
<span id="cb586-6"><a href="extending-learners.html#cb586-6"></a><span class="co">#&#39; @templateVar id classif.rpart</span></span>
<span id="cb586-7"><a href="extending-learners.html#cb586-7"></a><span class="co">#&#39; @templateVar caller rpart</span></span>
<span id="cb586-8"><a href="extending-learners.html#cb586-8"></a><span class="co">#&#39;</span></span>
<span id="cb586-9"><a href="extending-learners.html#cb586-9"></a><span class="co">#&#39; @references</span></span>
<span id="cb586-10"><a href="extending-learners.html#cb586-10"></a><span class="co">#&#39; &lt;</span><span class="al">FIXME</span><span class="co"> - DELETE THIS AND LINE ABOVE IF OMITTED&gt;</span></span>
<span id="cb586-11"><a href="extending-learners.html#cb586-11"></a><span class="co">#&#39;</span></span>
<span id="cb586-12"><a href="extending-learners.html#cb586-12"></a><span class="co">#&#39; @template seealso_learner</span></span>
<span id="cb586-13"><a href="extending-learners.html#cb586-13"></a><span class="co">#&#39; @template example</span></span>
<span id="cb586-14"><a href="extending-learners.html#cb586-14"></a><span class="co">#&#39; @export</span></span>
<span id="cb586-15"><a href="extending-learners.html#cb586-15"></a>LearnerClassifRpart =<span class="st"> </span><span class="kw">R6Class</span>(<span class="st">&quot;LearnerClassifRpart&quot;</span>,</span>
<span id="cb586-16"><a href="extending-learners.html#cb586-16"></a>  <span class="dt">inherit =</span> LearnerClassif,</span>
<span id="cb586-17"><a href="extending-learners.html#cb586-17"></a></span>
<span id="cb586-18"><a href="extending-learners.html#cb586-18"></a>  <span class="dt">public =</span> <span class="kw">list</span>(</span>
<span id="cb586-19"><a href="extending-learners.html#cb586-19"></a>    <span class="co">#&#39; @description</span></span>
<span id="cb586-20"><a href="extending-learners.html#cb586-20"></a>    <span class="co">#&#39; Creates a new instance of this [R6][R6::R6Class] class.</span></span>
<span id="cb586-21"><a href="extending-learners.html#cb586-21"></a>    <span class="dt">initialize =</span> <span class="cf">function</span>() {</span>
<span id="cb586-22"><a href="extending-learners.html#cb586-22"></a>      <span class="co"># </span><span class="al">FIXME</span><span class="co"> - MANUALLY ADD PARAM_SET BELOW AND THEN DELETE THIS LINE</span></span>
<span id="cb586-23"><a href="extending-learners.html#cb586-23"></a>      ps =<span class="st"> </span><span class="er">&lt;</span>param_set<span class="op">&gt;</span></span>
<span id="cb586-24"><a href="extending-learners.html#cb586-24"></a></span>
<span id="cb586-25"><a href="extending-learners.html#cb586-25"></a><span class="st">      </span><span class="co"># </span><span class="al">FIXME</span><span class="co"> - MANUALLY UPDATE PARAM VALUES BELOW IF APPLICABLE THEN DELETE THIS LINE.</span></span>
<span id="cb586-26"><a href="extending-learners.html#cb586-26"></a><span class="st">      </span><span class="co"># OTHERWISE DELETE THIS AND LINE BELOW.</span></span>
<span id="cb586-27"><a href="extending-learners.html#cb586-27"></a><span class="st">      </span>ps<span class="op">$</span>values =<span class="st"> </span><span class="kw">list</span>(<span class="op">&lt;</span>param_vals<span class="op">&gt;</span>)</span>
<span id="cb586-28"><a href="extending-learners.html#cb586-28"></a></span>
<span id="cb586-29"><a href="extending-learners.html#cb586-29"></a>      super<span class="op">$</span><span class="kw">initialize</span>(</span>
<span id="cb586-30"><a href="extending-learners.html#cb586-30"></a>        <span class="dt">id =</span> <span class="st">&quot;classif.rpart&quot;</span>,</span>
<span id="cb586-31"><a href="extending-learners.html#cb586-31"></a>        <span class="dt">packages =</span> <span class="st">&quot;rpart&quot;</span>,</span>
<span id="cb586-32"><a href="extending-learners.html#cb586-32"></a>        <span class="dt">feature_types =</span> <span class="kw">c</span>(<span class="st">&quot;logical&quot;</span>, <span class="st">&quot;integer&quot;</span>, <span class="st">&quot;numeric&quot;</span>, <span class="st">&quot;factor&quot;</span>, <span class="st">&quot;ordered&quot;</span>),</span>
<span id="cb586-33"><a href="extending-learners.html#cb586-33"></a>        <span class="dt">predict_types =</span> <span class="kw">c</span>(<span class="st">&quot;response&quot;</span>, <span class="st">&quot;prob&quot;</span>),</span>
<span id="cb586-34"><a href="extending-learners.html#cb586-34"></a>        <span class="dt">param_set =</span> ps,</span>
<span id="cb586-35"><a href="extending-learners.html#cb586-35"></a>        <span class="dt">properties =</span> <span class="kw">c</span>(<span class="st">&quot;importance&quot;</span>, <span class="st">&quot;missings&quot;</span>, <span class="st">&quot;multiclass&quot;</span>, <span class="st">&quot;selected_features&quot;</span>, <span class="st">&quot;twoclass&quot;</span>, <span class="st">&quot;weights&quot;</span>),</span>
<span id="cb586-36"><a href="extending-learners.html#cb586-36"></a>        <span class="dt">man =</span> <span class="st">&quot;mlr3extralearners::mlr_learners_classif.rpart&quot;</span></span>
<span id="cb586-37"><a href="extending-learners.html#cb586-37"></a>      )</span>
<span id="cb586-38"><a href="extending-learners.html#cb586-38"></a>    },</span>
<span id="cb586-39"><a href="extending-learners.html#cb586-39"></a></span>
<span id="cb586-40"><a href="extending-learners.html#cb586-40"></a>    <span class="co"># </span><span class="al">FIXME</span><span class="co"> - ADD IMPORTANCE METHOD HERE AND DELETE THIS LINE.</span></span>
<span id="cb586-41"><a href="extending-learners.html#cb586-41"></a>    <span class="co"># &lt;See LearnerRegrRandomForest for an example&gt;</span></span>
<span id="cb586-42"><a href="extending-learners.html#cb586-42"></a>    <span class="co">#&#39; @description</span></span>
<span id="cb586-43"><a href="extending-learners.html#cb586-43"></a>    <span class="co">#&#39; The importance scores are extracted from the slot &lt;</span><span class="al">FIXME</span><span class="co">&gt;.</span></span>
<span id="cb586-44"><a href="extending-learners.html#cb586-44"></a>    <span class="co">#&#39; @return Named `numeric()`.</span></span>
<span id="cb586-45"><a href="extending-learners.html#cb586-45"></a>    <span class="dt">importance =</span> <span class="cf">function</span>() { }</span>
<span id="cb586-46"><a href="extending-learners.html#cb586-46"></a></span>
<span id="cb586-47"><a href="extending-learners.html#cb586-47"></a>  ),</span>
<span id="cb586-48"><a href="extending-learners.html#cb586-48"></a></span>
<span id="cb586-49"><a href="extending-learners.html#cb586-49"></a>  <span class="dt">private =</span> <span class="kw">list</span>(</span>
<span id="cb586-50"><a href="extending-learners.html#cb586-50"></a></span>
<span id="cb586-51"><a href="extending-learners.html#cb586-51"></a>    <span class="dt">.train =</span> <span class="cf">function</span>(task) {</span>
<span id="cb586-52"><a href="extending-learners.html#cb586-52"></a>      pars =<span class="st"> </span>self<span class="op">$</span>param_set<span class="op">$</span><span class="kw">get_values</span>(<span class="dt">tags =</span> <span class="st">&quot;train&quot;</span>)</span>
<span id="cb586-53"><a href="extending-learners.html#cb586-53"></a></span>
<span id="cb586-54"><a href="extending-learners.html#cb586-54"></a>      <span class="co"># set column names to ensure consistency in fit and predict</span></span>
<span id="cb586-55"><a href="extending-learners.html#cb586-55"></a>      self<span class="op">$</span>state<span class="op">$</span>feature_names =<span class="st"> </span>task<span class="op">$</span>feature_names</span>
<span id="cb586-56"><a href="extending-learners.html#cb586-56"></a></span>
<span id="cb586-57"><a href="extending-learners.html#cb586-57"></a>      <span class="co"># </span><span class="al">FIXME</span><span class="co"> - &lt;Create objects for the train call</span></span>
<span id="cb586-58"><a href="extending-learners.html#cb586-58"></a>      <span class="co"># &lt;At least &quot;data&quot; and &quot;formula&quot; are required&gt;</span></span>
<span id="cb586-59"><a href="extending-learners.html#cb586-59"></a>      formula =<span class="st"> </span>task<span class="op">$</span><span class="kw">formula</span>()</span>
<span id="cb586-60"><a href="extending-learners.html#cb586-60"></a>      data =<span class="st"> </span>task<span class="op">$</span><span class="kw">data</span>()</span>
<span id="cb586-61"><a href="extending-learners.html#cb586-61"></a></span>
<span id="cb586-62"><a href="extending-learners.html#cb586-62"></a>      <span class="co"># </span><span class="al">FIXME</span><span class="co"> - &lt;here is space for some custom adjustments before proceeding to the</span></span>
<span id="cb586-63"><a href="extending-learners.html#cb586-63"></a>      <span class="co"># train call. Check other learners for what can be done here&gt;</span></span>
<span id="cb586-64"><a href="extending-learners.html#cb586-64"></a></span>
<span id="cb586-65"><a href="extending-learners.html#cb586-65"></a>      <span class="co"># use the mlr3misc::invoke function (it&#39;s similar to do.call())</span></span>
<span id="cb586-66"><a href="extending-learners.html#cb586-66"></a>      mlr3misc<span class="op">::</span><span class="kw">invoke</span>(rpart<span class="op">::</span>rpart,</span>
<span id="cb586-67"><a href="extending-learners.html#cb586-67"></a>                       <span class="dt">formula =</span> formula,</span>
<span id="cb586-68"><a href="extending-learners.html#cb586-68"></a>                       <span class="dt">data =</span> data,</span>
<span id="cb586-69"><a href="extending-learners.html#cb586-69"></a>                       <span class="dt">.args =</span> pars)</span>
<span id="cb586-70"><a href="extending-learners.html#cb586-70"></a>    },</span>
<span id="cb586-71"><a href="extending-learners.html#cb586-71"></a></span>
<span id="cb586-72"><a href="extending-learners.html#cb586-72"></a>    <span class="dt">.predict =</span> <span class="cf">function</span>(task) {</span>
<span id="cb586-73"><a href="extending-learners.html#cb586-73"></a>      <span class="co"># get parameters with tag &quot;predict&quot;</span></span>
<span id="cb586-74"><a href="extending-learners.html#cb586-74"></a>      pars =<span class="st"> </span>self<span class="op">$</span>param_set<span class="op">$</span><span class="kw">get_values</span>(<span class="dt">tags =</span> <span class="st">&quot;predict&quot;</span>)</span>
<span id="cb586-75"><a href="extending-learners.html#cb586-75"></a>      <span class="co"># get newdata</span></span>
<span id="cb586-76"><a href="extending-learners.html#cb586-76"></a>      newdata =<span class="st"> </span>task<span class="op">$</span><span class="kw">data</span>(<span class="dt">cols =</span> task<span class="op">$</span>feature_names)</span>
<span id="cb586-77"><a href="extending-learners.html#cb586-77"></a></span>
<span id="cb586-78"><a href="extending-learners.html#cb586-78"></a>      pred =<span class="st"> </span>mlr3misc<span class="op">::</span><span class="kw">invoke</span>(predict, self<span class="op">$</span>model, <span class="dt">newdata =</span> newdata,</span>
<span id="cb586-79"><a href="extending-learners.html#cb586-79"></a>                              <span class="dt">type =</span> type, <span class="dt">.args =</span> pars)</span>
<span id="cb586-80"><a href="extending-learners.html#cb586-80"></a></span>
<span id="cb586-81"><a href="extending-learners.html#cb586-81"></a>      <span class="co"># </span><span class="al">FIXME</span><span class="co"> - ADD PREDICTIONS TO LIST BELOW</span></span>
<span id="cb586-82"><a href="extending-learners.html#cb586-82"></a>      <span class="kw">list</span>(...)</span>
<span id="cb586-83"><a href="extending-learners.html#cb586-83"></a>    }</span>
<span id="cb586-84"><a href="extending-learners.html#cb586-84"></a>  )</span>
<span id="cb586-85"><a href="extending-learners.html#cb586-85"></a>)</span>
<span id="cb586-86"><a href="extending-learners.html#cb586-86"></a></span>
<span id="cb586-87"><a href="extending-learners.html#cb586-87"></a>.extralrns_dict<span class="op">$</span><span class="kw">add</span>(<span class="st">&quot;classif.rpart&quot;</span>, LearnerClassifRpart)</span></code></pre></div>
<p>Now we have to do the following (from top to bottom):</p>
<ol style="list-style-type: decimal">
<li>Fill in the references under “references” and delete the tag that starts “FIXME”</li>
<li>Replace <code>&lt;param_set&gt;</code> with a <a href="extending-learners.html#param-set">parameter set</a></li>
<li>Optionally <a href="extending-learners.html#param-set">change default values</a> for parameters in <code>&lt;param_vals&gt;</code></li>
<li>As we included “importance” in <code>properties</code> we have to add a function to the public method <code>importance</code></li>
<li>Fill in the private <a href="extending-learners.html#learner-train"><code>.train</code></a> method, which takes a (filtered) <a href="https://mlr3.mlr-org.com/reference/Task.html"><code>Task</code></a> and returns a model.</li>
<li>Fill in the private <a href="extending-learners.html#learner-predict"><code>.predict</code></a> method, which operates on the model in <code>self$model</code> (stored during <code>$train()</code>) and a (differently subsetted) <a href="https://mlr3.mlr-org.com/reference/Task.html"><code>Task</code></a> to return a named list of predictions.</li>
</ol>
</div>
<div id="learner-meta-information" class="section level3">
<h3><span class="header-section-number">6.1.3</span> Meta-information</h3>
<p>In the constructor (<code>initialize()</code>) the constructor of the super class (e.g. <a href="https://mlr3.mlr-org.com/reference/LearnerClassif.html"><code>LearnerClassif</code></a>) is called with meta information about the learner which should be constructed.
This includes:</p>
<ul>
<li><code>id</code>: The ID of the new learner. Usually consists of <code>&lt;type&gt;.&lt;algorithm&gt;</code>, for example: <code>"classif.rpart"</code>.</li>
<li><code>packages</code>: The upstream package name of the implemented learner.</li>
<li><code>param_set</code>: A set of hyperparameters and their descriptions provided as a <a href="https://paradox.mlr-org.com/reference/ParamSet.html"><code>paradox::ParamSet</code></a>.
For each hyperparameter the appropriate class needs to be chosen:
<ul>
<li><a href="https://paradox.mlr-org.com/reference/ParamLgl.html"><code>paradox::ParamLgl</code></a> for scalar logical hyperparameters.</li>
<li><a href="https://paradox.mlr-org.com/reference/ParamInt.html"><code>paradox::ParamInt</code></a> for scalar integer hyperparameters.</li>
<li><a href="https://paradox.mlr-org.com/reference/ParamDbl.html"><code>paradox::ParamDbl</code></a> for scalar numeric hyperparameters.</li>
<li><a href="https://paradox.mlr-org.com/reference/ParamFct.html"><code>paradox::ParamFct</code></a> for scalar factor hyperparameters (this includes characters).</li>
<li><a href="https://paradox.mlr-org.com/reference/ParamUty.html"><code>paradox::ParamUty</code></a> for everything else (e.g. vector paramters or list parameters).</li>
</ul></li>
<li><code>predict_types</code>: Set of predict types the learner is able to handle.
These differ depending on the type of the learner. See <a href="https://mlr3.mlr-org.com/reference/mlr_reflections.html"><code>mlr_reflections$learner_predict_types</code></a> for the full list of feature types supported by <code>mlr3</code>.
<ul>
<li><code>LearnerClassif</code>
<ul>
<li><code>response</code>: Only predicts a class label for each observation in the test set.</li>
<li><code>prob</code>: Also predicts the posterior probability for each class for each observation in the test set.</li>
</ul></li>
<li><code>LearnerRegr</code>
<ul>
<li><code>response</code>: Only predicts a numeric response for each observation in the test set.</li>
<li><code>se</code>: Also predicts the standard error for each value of response for each observation in the test set.</li>
</ul></li>
</ul></li>
<li><code>feature_types</code>: Set of feature types the learner is able to handle.
See <a href="https://mlr3.mlr-org.com/reference/mlr_reflections.html"><code>mlr_reflections$task_feature_types</code></a> for feature types supported by <code>mlr3</code>.</li>
<li><code>properties</code>: Set of properties of the learner. See <a href="https://mlr3.mlr-org.com/reference/mlr_reflections.html"><code>mlr_reflections$learner_properties</code></a> for the full list of feature types supported by <code>mlr3</code>. Possible properties include:
<ul>
<li><code>"twoclass"</code>: The learner works on binary classification problems.</li>
<li><code>"multiclass"</code>: The learner works on multi-class classification problems.</li>
<li><code>"missings"</code>: The learner can natively handle missing values.</li>
<li><code>"weights"</code>: The learner can work on tasks which have observation weights / case weights.</li>
<li><code>"parallel"</code>: The learner supports internal parallelization in some way.
Currently not used, this is an experimental property.</li>
<li><code>"importance"</code>: The learner supports extracting importance values for features.
If this property is set, you must also implement a public method <code>importance()</code> to retrieve the importance values from the model.</li>
<li><code>"selected_features"</code>: The learner supports extracting the features which where used.
If this property is set, you must also implement a public method <code>selected_features()</code> to retrieve the set of used features from the model.</li>
</ul></li>
<li><code>man</code>: The roxygen identifier of the learner.
This is used within the <code>$help()</code> method of the super class to open the help page of the learner.</li>
</ul>
</div>
<div id="param-set" class="section level3">
<h3><span class="header-section-number">6.1.4</span> ParamSet</h3>
<p>The <code>param_set</code> is the set of hyperparameters used in model training and predicting, this is given as a <a href="https://paradox.mlr-org.com/reference/ParamSet.html"><code>paradox::ParamSet</code></a>. The set consists of a list of hyperparameters, each has a specific class for the hyperparameter type:</p>
<ul>
<li><a href="https://paradox.mlr-org.com/reference/ParamLgl.html"><code>paradox::ParamLgl</code></a> for scalar logical hyperparameters.
<ul>
<li><a href="https://paradox.mlr-org.com/reference/ParamInt.html"><code>paradox::ParamInt</code></a> for scalar integer hyperparameters.</li>
<li><a href="https://paradox.mlr-org.com/reference/ParamDbl.html"><code>paradox::ParamDbl</code></a> for scalar numeric hyperparameters.</li>
<li><a href="https://paradox.mlr-org.com/reference/ParamFct.html"><code>paradox::ParamFct</code></a> for scalar factor hyperparameters (this includes characters).</li>
<li><a href="https://paradox.mlr-org.com/reference/ParamUty.html"><code>paradox::ParamUty</code></a> for everything else (e.g. vector or list parameters).</li>
</ul></li>
</ul>
<p>For <code>classif.rpart</code> the following replace <code>&lt;param_set&gt;</code> above:</p>
<div class="sourceCode" id="cb587"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb587-1"><a href="extending-learners.html#cb587-1"></a>     ps =<span class="st"> </span>ParamSet<span class="op">$</span><span class="kw">new</span>(<span class="kw">list</span>(</span>
<span id="cb587-2"><a href="extending-learners.html#cb587-2"></a>        ParamInt<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">&quot;minsplit&quot;</span>, <span class="dt">default =</span> 20L, <span class="dt">lower =</span> 1L, <span class="dt">tags =</span> <span class="st">&quot;train&quot;</span>),</span>
<span id="cb587-3"><a href="extending-learners.html#cb587-3"></a>        ParamInt<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">&quot;minbucket&quot;</span>, <span class="dt">lower =</span> 1L, <span class="dt">tags =</span> <span class="st">&quot;train&quot;</span>),</span>
<span id="cb587-4"><a href="extending-learners.html#cb587-4"></a>        ParamDbl<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">&quot;cp&quot;</span>, <span class="dt">default =</span> <span class="fl">0.01</span>, <span class="dt">lower =</span> <span class="dv">0</span>, <span class="dt">upper =</span> <span class="dv">1</span>, <span class="dt">tags =</span> <span class="st">&quot;train&quot;</span>),</span>
<span id="cb587-5"><a href="extending-learners.html#cb587-5"></a>        ParamInt<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">&quot;maxcompete&quot;</span>, <span class="dt">default =</span> 4L, <span class="dt">lower =</span> 0L, <span class="dt">tags =</span> <span class="st">&quot;train&quot;</span>),</span>
<span id="cb587-6"><a href="extending-learners.html#cb587-6"></a>        ParamInt<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">&quot;maxsurrogate&quot;</span>, <span class="dt">default =</span> 5L, <span class="dt">lower =</span> 0L, <span class="dt">tags =</span> <span class="st">&quot;train&quot;</span>),</span>
<span id="cb587-7"><a href="extending-learners.html#cb587-7"></a>        ParamInt<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">&quot;maxdepth&quot;</span>, <span class="dt">default =</span> 30L, <span class="dt">lower =</span> 1L, <span class="dt">upper =</span> 30L, <span class="dt">tags =</span> <span class="st">&quot;train&quot;</span>),</span>
<span id="cb587-8"><a href="extending-learners.html#cb587-8"></a>        ParamInt<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">&quot;usesurrogate&quot;</span>, <span class="dt">default =</span> 2L, <span class="dt">lower =</span> 0L, <span class="dt">upper =</span> 2L, <span class="dt">tags =</span> <span class="st">&quot;train&quot;</span>),</span>
<span id="cb587-9"><a href="extending-learners.html#cb587-9"></a>        ParamInt<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">&quot;surrogatestyle&quot;</span>, <span class="dt">default =</span> 0L, <span class="dt">lower =</span> 0L, <span class="dt">upper =</span> 1L, <span class="dt">tags =</span> <span class="st">&quot;train&quot;</span>),</span>
<span id="cb587-10"><a href="extending-learners.html#cb587-10"></a>        ParamInt<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">&quot;xval&quot;</span>, <span class="dt">default =</span> 0L, <span class="dt">lower =</span> 0L, <span class="dt">tags =</span> <span class="st">&quot;train&quot;</span>),</span>
<span id="cb587-11"><a href="extending-learners.html#cb587-11"></a>        ParamLgl<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">&quot;keep_model&quot;</span>, <span class="dt">default =</span> <span class="ot">FALSE</span>, <span class="dt">tags =</span> <span class="st">&quot;train&quot;</span>)</span>
<span id="cb587-12"><a href="extending-learners.html#cb587-12"></a>      ))</span>
<span id="cb587-13"><a href="extending-learners.html#cb587-13"></a>      ps<span class="op">$</span>values =<span class="st"> </span><span class="kw">list</span>(<span class="dt">xval =</span> 0L)</span></code></pre></div>
<p>You should read though the learner documentation to find the full list of available parameters. Just looking at some of these in this example:</p>
<ul>
<li><code>"cp"</code> is numeric, has a feasible range of <code>[0,1]</code> and defaults to <code>0.01</code>.
The parameter is used during <code>"train"</code>.</li>
<li><code>"xval"</code> is integer has a lower bound of <code>0</code>, a default of <code>0</code> and the parameter is used during <code>"train"</code>.</li>
<li><code>"keep_model"</code> is logical with a default of <code>FALSE</code> and is used during <code>"train"</code>.</li>
</ul>
<p>In some rare cases you may want to change the default parameter values. You can do this by passing a list to <code>&lt;param_vals&gt;</code> in the template script above. You can see we have done this for <code>"classif.rpart"</code> where the default for <code>xval</code> is changed to <code>0</code>. Note that the default in the <code>ParamSet</code> is recorded as our changed default (0), and not the original (10). It is strongly recommended to only change the defaults if absolutely required, when this is the case add the following to the learner documentation:</p>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb588-1"><a href="extending-learners.html#cb588-1"></a><span class="co">#&#39; @section Custom mlr3 defaults:</span></span>
<span id="cb588-2"><a href="extending-learners.html#cb588-2"></a><span class="co">#&#39; - `&lt;parameter&gt;`:</span></span>
<span id="cb588-3"><a href="extending-learners.html#cb588-3"></a><span class="co">#&#39;   - Actual default: &lt;value&gt;</span></span>
<span id="cb588-4"><a href="extending-learners.html#cb588-4"></a><span class="co">#&#39;   - Adjusted default: &lt;value&gt;</span></span>
<span id="cb588-5"><a href="extending-learners.html#cb588-5"></a><span class="co">#&#39;   - Reason for change: &lt;text&gt;</span></span></code></pre></div>
</div>
<div id="learner-train" class="section level3">
<h3><span class="header-section-number">6.1.5</span> Train function</h3>
<p>Let’s talk about the <code>.train()</code> method.
The train function takes a <a href="https://mlr3.mlr-org.com/reference/Task.html"><code>Task</code></a> as input and must return a model.</p>
<p>Let’s say we want to translate the following call of <code>rpart::rpart()</code> into code that can be used inside the <code>.train()</code> method.</p>
<p>First, we write something down that works completely without <code>mlr3</code>:</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb589-1"><a href="extending-learners.html#cb589-1"></a>data =<span class="st"> </span>iris</span>
<span id="cb589-2"><a href="extending-learners.html#cb589-2"></a>model =<span class="st"> </span>rpart<span class="op">::</span><span class="kw">rpart</span>(Species <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> iris, <span class="dt">xval =</span> <span class="dv">0</span>)</span></code></pre></div>
<p>We need to pass the formula notation <code>Species ~ .</code>, the data and the hyperparameters.
To get the hyperparameters, we call <code>self$param_set$get_values()</code> and query all parameters that are using during <code>"train"</code>.</p>
<p>The dataset is extracted from the <a href="https://mlr3.mlr-org.com/reference/Task.html"><code>Task</code></a>.</p>
<p>Last, we call the upstream function <code>rpart::rpart()</code> with the data and pass all hyperparameters via argument <code>.args</code> using the <code>mlr3misc::invoke()</code> function.
The latter is simply an optimized version of <code>do.call()</code> that we use within the mlr3 ecosystem.</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb590-1"><a href="extending-learners.html#cb590-1"></a>.train =<span class="st"> </span><span class="cf">function</span>(task) {</span>
<span id="cb590-2"><a href="extending-learners.html#cb590-2"></a>  pars =<span class="st"> </span>self<span class="op">$</span>param_set<span class="op">$</span><span class="kw">get_values</span>(<span class="dt">tags =</span> <span class="st">&quot;train&quot;</span>)</span>
<span id="cb590-3"><a href="extending-learners.html#cb590-3"></a>  formula =<span class="st"> </span>task<span class="op">$</span><span class="kw">formula</span>()</span>
<span id="cb590-4"><a href="extending-learners.html#cb590-4"></a>  data =<span class="st"> </span>task<span class="op">$</span><span class="kw">data</span>()</span>
<span id="cb590-5"><a href="extending-learners.html#cb590-5"></a>  mlr3misc<span class="op">::</span><span class="kw">invoke</span>(rpart<span class="op">::</span>rpart,</span>
<span id="cb590-6"><a href="extending-learners.html#cb590-6"></a>                   <span class="dt">formula =</span> formula,</span>
<span id="cb590-7"><a href="extending-learners.html#cb590-7"></a>                   <span class="dt">data =</span> data,</span>
<span id="cb590-8"><a href="extending-learners.html#cb590-8"></a>                   <span class="dt">.args =</span> pars)</span>
<span id="cb590-9"><a href="extending-learners.html#cb590-9"></a>}</span></code></pre></div>
</div>
<div id="learner-predict" class="section level3">
<h3><span class="header-section-number">6.1.6</span> Predict function</h3>
<p>The internal predict method <code>.predict()</code> also operates on a <a href="https://mlr3.mlr-org.com/reference/Task.html"><code>Task</code></a> as well as on the fitted model that has been created by the <code>train()</code> call previously and has been stored in <code>self$model</code>.</p>
<p>The return value is a <a href="https://mlr3.mlr-org.com/reference/Prediction.html"><code>Prediction</code></a> object.
We proceed analogously to what we did in the previous section.
We start with a version without any <code>mlr3</code> objects and continue to replace objects until we have reached the desired interface:</p>
<div class="sourceCode" id="cb591"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb591-1"><a href="extending-learners.html#cb591-1"></a><span class="co"># inputs:</span></span>
<span id="cb591-2"><a href="extending-learners.html#cb591-2"></a>task =<span class="st"> </span><span class="kw">tsk</span>(<span class="st">&quot;iris&quot;</span>)</span>
<span id="cb591-3"><a href="extending-learners.html#cb591-3"></a>self =<span class="st"> </span><span class="kw">list</span>(<span class="dt">model =</span> rpart<span class="op">::</span><span class="kw">rpart</span>(task<span class="op">$</span><span class="kw">formula</span>(), <span class="dt">data =</span> task<span class="op">$</span><span class="kw">data</span>()))</span>
<span id="cb591-4"><a href="extending-learners.html#cb591-4"></a></span>
<span id="cb591-5"><a href="extending-learners.html#cb591-5"></a>data =<span class="st"> </span>iris</span>
<span id="cb591-6"><a href="extending-learners.html#cb591-6"></a>response =<span class="st"> </span><span class="kw">predict</span>(self<span class="op">$</span>model, <span class="dt">newdata =</span> data, <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)</span>
<span id="cb591-7"><a href="extending-learners.html#cb591-7"></a>prob =<span class="st"> </span><span class="kw">predict</span>(self<span class="op">$</span>model, <span class="dt">newdata =</span> data, <span class="dt">type =</span> <span class="st">&quot;prob&quot;</span>)</span></code></pre></div>
<p>The <a href="https://www.rdocumentation.org/packages/rpart/topics/predict.rpart"><code>rpart::predict.rpart()</code></a> function predicts class labels if argument <code>type</code> is set to to <code>"class"</code>, and class probabilities if set to <code>"prob"</code>.</p>
<p>Next, we transition from <code>data</code> to a <code>task</code> again and construct a list with the return type requested by the user, this is stored in the <code>$predict_type</code> slot of a learner class. Note that the <code>task</code> is automatically passed to the prediction object, so all you need to do is return the predictions! Make sure the list names are identical to the task predict types.</p>
<p>The final <code>.predict()</code> method is below, we could omit the <code>pars</code> line as there are no parameters with the <code>"predict"</code> tag but we keep it here to be consistent:</p>
<div class="sourceCode" id="cb592"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb592-1"><a href="extending-learners.html#cb592-1"></a>.predict =<span class="st"> </span><span class="cf">function</span>(task) {</span>
<span id="cb592-2"><a href="extending-learners.html#cb592-2"></a>  pars =<span class="st"> </span>self<span class="op">$</span>param_set<span class="op">$</span><span class="kw">get_values</span>(<span class="dt">tags =</span> <span class="st">&quot;predict&quot;</span>)</span>
<span id="cb592-3"><a href="extending-learners.html#cb592-3"></a>  <span class="co"># get newdata and ensure same ordering in train and predict</span></span>
<span id="cb592-4"><a href="extending-learners.html#cb592-4"></a>  newdata =<span class="st"> </span>task<span class="op">$</span><span class="kw">data</span>(<span class="dt">cols =</span> self<span class="op">$</span>state<span class="op">$</span>feature_names)</span>
<span id="cb592-5"><a href="extending-learners.html#cb592-5"></a>  <span class="cf">if</span> (self<span class="op">$</span>predict_type <span class="op">==</span><span class="st"> &quot;response&quot;</span>) {</span>
<span id="cb592-6"><a href="extending-learners.html#cb592-6"></a>    response =<span class="st"> </span>mlr3misc<span class="op">::</span><span class="kw">invoke</span>(predict,</span>
<span id="cb592-7"><a href="extending-learners.html#cb592-7"></a>                            self<span class="op">$</span>model,</span>
<span id="cb592-8"><a href="extending-learners.html#cb592-8"></a>                            <span class="dt">newdata =</span> newdata,</span>
<span id="cb592-9"><a href="extending-learners.html#cb592-9"></a>                            <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>,</span>
<span id="cb592-10"><a href="extending-learners.html#cb592-10"></a>                            <span class="dt">.args =</span> pars)</span>
<span id="cb592-11"><a href="extending-learners.html#cb592-11"></a></span>
<span id="cb592-12"><a href="extending-learners.html#cb592-12"></a>    <span class="kw">return</span>(<span class="kw">list</span>(<span class="dt">response =</span> response))</span>
<span id="cb592-13"><a href="extending-learners.html#cb592-13"></a>  } <span class="cf">else</span> {</span>
<span id="cb592-14"><a href="extending-learners.html#cb592-14"></a>    prob =<span class="st"> </span>mlr3misc<span class="op">::</span><span class="kw">invoke</span>(predict,</span>
<span id="cb592-15"><a href="extending-learners.html#cb592-15"></a>                            self<span class="op">$</span>model,</span>
<span id="cb592-16"><a href="extending-learners.html#cb592-16"></a>                            <span class="dt">newdata =</span> newdata,</span>
<span id="cb592-17"><a href="extending-learners.html#cb592-17"></a>                            <span class="dt">type =</span> <span class="st">&quot;prob&quot;</span>,</span>
<span id="cb592-18"><a href="extending-learners.html#cb592-18"></a>                            <span class="dt">.args =</span> pars)</span>
<span id="cb592-19"><a href="extending-learners.html#cb592-19"></a>    <span class="kw">return</span>(<span class="kw">list</span>(<span class="dt">prob =</span> prob))</span>
<span id="cb592-20"><a href="extending-learners.html#cb592-20"></a>  }</span>
<span id="cb592-21"><a href="extending-learners.html#cb592-21"></a>}</span></code></pre></div>
<p>Note that you cannot rely on the column order of the data returned by <code>task$data()</code> as the order of columns may be different from the order of the columns during <code>$.train</code>. The <code>newdata</code> line ensures the ordering is the same by calling the saved order set in <code>$.train</code>, don’t delete either of these lines!</p>
</div>
<div id="learner-control" class="section level3">
<h3><span class="header-section-number">6.1.7</span> Control objects/functions of learners</h3>
<p>Some learners rely on a “control” object/function such as <code>glmnet::glmnet.control()</code>.
Accounting for such depends on how the underlying package works:</p>
<ul>
<li>If the package forwards the control parameters via <code>...</code> and makes it possible to just pass control parameters as additional parameters directly to the train call, there is no need to distinguish both <code>"train"</code> and <code>"control"</code> parameters.
Both can be tagged with “train” in the ParamSet and just be handed over as shown previously.</li>
<li>If the control parameters need to be passed via a separate argument, the parameters should also be tagged accordingly in the ParamSet.
Afterwards they can be queried via their tag and passed separately to <code>mlr3misc::invoke()</code>.
See example below.</li>
</ul>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb593-1"><a href="extending-learners.html#cb593-1"></a>control_pars =<span class="st"> </span>mlr3misc<span class="op">::</span>(<span class="op">&lt;</span>package<span class="op">&gt;</span><span class="er">::&lt;</span><span class="cf">function</span><span class="op">&gt;</span>,</span>
<span id="cb593-2"><a href="extending-learners.html#cb593-2"></a>   self<span class="op">$</span>param_set<span class="op">$</span><span class="kw">get_values</span>(<span class="dt">tags =</span> <span class="st">&quot;control&quot;</span>))</span>
<span id="cb593-3"><a href="extending-learners.html#cb593-3"></a></span>
<span id="cb593-4"><a href="extending-learners.html#cb593-4"></a>train_pars =<span class="st"> </span>self<span class="op">$</span>param_set<span class="op">$</span><span class="kw">get_values</span>(<span class="dt">tags =</span> <span class="st">&quot;train&quot;</span>)<span class="er">)</span></span>
<span id="cb593-5"><a href="extending-learners.html#cb593-5"></a></span>
<span id="cb593-6"><a href="extending-learners.html#cb593-6"></a>mlr3misc<span class="op">::</span><span class="kw">invoke</span>([...], <span class="dt">.args =</span> train_pars, <span class="dt">control =</span> control_pars)</span></code></pre></div>
</div>
<div id="learner-test" class="section level3">
<h3><span class="header-section-number">6.1.8</span> Testing the learner</h3>
<p>Once your learner is created, you are ready to start testing if it works, there are three types of tests: <a href="extending-learners.html#learner-test-manual">manual</a>, <a href="extending-learners.html#learner-test-unit">unit</a> and <a href="extending-learners.html#learner-test-parameter">parameter</a>.</p>
<div id="learner-test-manual" class="section level4">
<h4><span class="header-section-number">6.1.8.1</span> Train and Predict</h4>
<p>For a bare-bone check you can just try to run a simple <code>train()</code> call locally.</p>
<div class="sourceCode" id="cb594"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb594-1"><a href="extending-learners.html#cb594-1"></a>task =<span class="st"> </span><span class="kw">tsk</span>(<span class="st">&quot;iris&quot;</span>) <span class="co"># assuming a Classif learner</span></span>
<span id="cb594-2"><a href="extending-learners.html#cb594-2"></a>lrn =<span class="st"> </span><span class="kw">lrn</span>(<span class="st">&quot;classif.rpart&quot;</span>)</span>
<span id="cb594-3"><a href="extending-learners.html#cb594-3"></a>lrn<span class="op">$</span><span class="kw">train</span>(task)</span>
<span id="cb594-4"><a href="extending-learners.html#cb594-4"></a>p =<span class="st"> </span>lrn<span class="op">$</span><span class="kw">predict</span>(task)</span>
<span id="cb594-5"><a href="extending-learners.html#cb594-5"></a>p<span class="op">$</span>confusion</span></code></pre></div>
<p>If it runs without erroring, that’s a very good start!</p>
</div>
<div id="learner-test-unit" class="section level4">
<h4><span class="header-section-number">6.1.8.2</span> Autotest</h4>
<p>To ensure that your learner is able to handle all kinds of different properties and feature types, we have written an “autotest” that checks the learner for different combinations of such.</p>
<p>The “autotest” setup is generated automatically by <code>create_learner</code> and will open after running the function, it will have a name with the form <code>test_package_type_key.R</code>, in our case this will actually be <code>test_rpart_classif_rpart.key</code>. <strong>This name must not be changed</strong> as triggering automated tests rely on a strict naming scheme. In our example this will create the following script, for which no changes are required to pass (assuming the learner was correctly created):</p>
<div class="sourceCode" id="cb595"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb595-1"><a href="extending-learners.html#cb595-1"></a><span class="kw">install_learners</span>(<span class="st">&quot;classif.rpart&quot;</span>)</span>
<span id="cb595-2"><a href="extending-learners.html#cb595-2"></a></span>
<span id="cb595-3"><a href="extending-learners.html#cb595-3"></a><span class="kw">test_that</span>(<span class="st">&quot;autotest&quot;</span>, {</span>
<span id="cb595-4"><a href="extending-learners.html#cb595-4"></a>  learner =<span class="st"> </span>LearnerClassifRpart<span class="op">$</span><span class="kw">new</span>()</span>
<span id="cb595-5"><a href="extending-learners.html#cb595-5"></a>  <span class="kw">expect_learner</span>(learner)</span>
<span id="cb595-6"><a href="extending-learners.html#cb595-6"></a>  result =<span class="st"> </span><span class="kw">run_autotest</span>(learner)</span>
<span id="cb595-7"><a href="extending-learners.html#cb595-7"></a>  <span class="kw">expect_true</span>(result, <span class="dt">info =</span> result<span class="op">$</span>error)</span>
<span id="cb595-8"><a href="extending-learners.html#cb595-8"></a>})</span></code></pre></div>
<p>For some learners that have required parameters, it is needed to set some values for required parameters after construction so that the learner can be run in the first place.</p>
<p>You can also exclude some specific test arrangements within the “autotest” via the argument <code>exclude</code> in the <code>run_autotest()</code> function.
Currently the <code>run_autotest()</code> function lives in <a href="https://github.com/mlr-org/mlr3/blob/f16326bf34bcac59c3b0a2fdbcf90dbebb3b4bbc/inst/testthat/helper_autotest.R">inst/testthat</a> of the <code>mlr_plkg("mlr3")</code> and still lacks documentation.
This should change in the near future.</p>
<p>To finally run the test suite, call <code>devtools::test()</code> or hit <code>CTRL + Shift + T</code> if you are using RStudio.</p>
</div>
<div id="learner-test-parameter" class="section level4">
<h4><span class="header-section-number">6.1.8.3</span> Checking Parameters</h4>
<p>Some learners have a high number of parameters and it is easy to miss out on some during the creation of a new learner.
In addition, if the maintainer of the upstream package changes something with respect to the arguments of the algorithm, the learner is in danger to break.
Also, new arguments could be added upstream and manually checking for new additions all the time is tedious.</p>
<p>Therefore we have written a “Parameter Check” that runs for every learner asynchronously to the R CMD Check of the package itself. This “Parameter Check” compares the parameters of the mlr3 ParamSet against all arguments available in the upstream function that is called during <code>$train()</code> and <code>$predict()</code>. Again the file is automatically created and opened by <code>create_learner</code>, this will be named like <code>test_paramtest_package_type_key.R</code>, so in our example <code>test_paramtest_rpart_classif_rpart.R</code>.</p>
<p>The test comes with an <code>exclude</code> argument that should be used to <em>exclude and explain</em> why certain arguments of the upstream function are not within the ParamSet of the mlr3learner. This will likely be required for all learners as common arguments like <code>x</code>, <code>target</code> or <code>data</code> are handled by the mlr3 interface and are therefore not included within the ParamSet.</p>
<p>However, there might be more parameters that need to be excluded, for example:</p>
<ul>
<li>Type dependent parameters, i.e. parameters that only apply for classification or regression learners.</li>
<li>Parameters that are actually deprecated by the upstream package and which were therefore not included in the mlr3 ParamSet.</li>
</ul>
<p>All excluded parameters should have a comment justifying their exclusion.</p>
<p>In our example, the final paramtest script looks like:</p>
<div class="sourceCode" id="cb596"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb596-1"><a href="extending-learners.html#cb596-1"></a><span class="kw">library</span>(mlr3extralearners)</span>
<span id="cb596-2"><a href="extending-learners.html#cb596-2"></a><span class="kw">install_learners</span>(<span class="st">&quot;classif.rpart&quot;</span>)</span>
<span id="cb596-3"><a href="extending-learners.html#cb596-3"></a></span>
<span id="cb596-4"><a href="extending-learners.html#cb596-4"></a><span class="kw">test_that</span>(<span class="st">&quot;classif.rpart train&quot;</span>, {</span>
<span id="cb596-5"><a href="extending-learners.html#cb596-5"></a>  learner =<span class="st"> </span><span class="kw">lrn</span>(<span class="st">&quot;classif.rpart&quot;</span>)</span>
<span id="cb596-6"><a href="extending-learners.html#cb596-6"></a>  fun =<span class="st"> </span>rpart<span class="op">::</span>rpart</span>
<span id="cb596-7"><a href="extending-learners.html#cb596-7"></a>  exclude =<span class="st"> </span><span class="kw">c</span>(</span>
<span id="cb596-8"><a href="extending-learners.html#cb596-8"></a>    <span class="st">&quot;formula&quot;</span>,<span class="co"># handled internally</span></span>
<span id="cb596-9"><a href="extending-learners.html#cb596-9"></a>    <span class="st">&quot;model&quot;</span>, <span class="co"># handled internally</span></span>
<span id="cb596-10"><a href="extending-learners.html#cb596-10"></a>    <span class="st">&quot;data&quot;</span>, <span class="co"># handled internally</span></span>
<span id="cb596-11"><a href="extending-learners.html#cb596-11"></a>    <span class="st">&quot;weights&quot;</span>, <span class="co"># handled by task</span></span>
<span id="cb596-12"><a href="extending-learners.html#cb596-12"></a>    <span class="st">&quot;subset&quot;</span>, <span class="co"># handled by task</span></span>
<span id="cb596-13"><a href="extending-learners.html#cb596-13"></a>    <span class="st">&quot;na.action&quot;</span>, <span class="co"># handled internally</span></span>
<span id="cb596-14"><a href="extending-learners.html#cb596-14"></a>    <span class="st">&quot;method&quot;</span>, <span class="co"># handled internally</span></span>
<span id="cb596-15"><a href="extending-learners.html#cb596-15"></a>    <span class="st">&quot;x&quot;</span>, <span class="co"># handled internally</span></span>
<span id="cb596-16"><a href="extending-learners.html#cb596-16"></a>    <span class="st">&quot;y&quot;</span>, <span class="co"># handled internally</span></span>
<span id="cb596-17"><a href="extending-learners.html#cb596-17"></a>    <span class="st">&quot;parms&quot;</span>, <span class="co"># handled internally</span></span>
<span id="cb596-18"><a href="extending-learners.html#cb596-18"></a>    <span class="st">&quot;control&quot;</span>, <span class="co"># handled internally</span></span>
<span id="cb596-19"><a href="extending-learners.html#cb596-19"></a>    <span class="st">&quot;cost&quot;</span> <span class="co"># handled internally</span></span>
<span id="cb596-20"><a href="extending-learners.html#cb596-20"></a>  )</span>
<span id="cb596-21"><a href="extending-learners.html#cb596-21"></a></span>
<span id="cb596-22"><a href="extending-learners.html#cb596-22"></a>  ParamTest =<span class="st"> </span><span class="kw">run_paramtest</span>(learner, fun, exclude)</span>
<span id="cb596-23"><a href="extending-learners.html#cb596-23"></a>  <span class="kw">expect_true</span>(ParamTest, <span class="dt">info =</span> <span class="kw">paste0</span>(</span>
<span id="cb596-24"><a href="extending-learners.html#cb596-24"></a>    <span class="st">&quot;Missing parameters:&quot;</span>,</span>
<span id="cb596-25"><a href="extending-learners.html#cb596-25"></a>    <span class="kw">paste0</span>(<span class="st">&quot;- &#39;&quot;</span>, ParamTest<span class="op">$</span>missing, <span class="st">&quot;&#39;&quot;</span>, <span class="dt">collapse =</span> <span class="st">&quot;</span></span>
<span id="cb596-26"><a href="extending-learners.html#cb596-26"></a><span class="st">&quot;</span>)))</span>
<span id="cb596-27"><a href="extending-learners.html#cb596-27"></a>})</span>
<span id="cb596-28"><a href="extending-learners.html#cb596-28"></a></span>
<span id="cb596-29"><a href="extending-learners.html#cb596-29"></a><span class="kw">test_that</span>(<span class="st">&quot;classif.rpart predict&quot;</span>, {</span>
<span id="cb596-30"><a href="extending-learners.html#cb596-30"></a>  learner =<span class="st"> </span><span class="kw">lrn</span>(<span class="st">&quot;classif.rpart&quot;</span>)</span>
<span id="cb596-31"><a href="extending-learners.html#cb596-31"></a>  fun =<span class="st"> </span>rpart<span class="op">:::</span>predict.rpart</span>
<span id="cb596-32"><a href="extending-learners.html#cb596-32"></a>    exclude =<span class="st"> </span><span class="kw">c</span>(</span>
<span id="cb596-33"><a href="extending-learners.html#cb596-33"></a>      <span class="st">&quot;object&quot;</span>, <span class="co"># handled internally</span></span>
<span id="cb596-34"><a href="extending-learners.html#cb596-34"></a>      <span class="st">&quot;newdata&quot;</span>, <span class="co"># handled internally</span></span>
<span id="cb596-35"><a href="extending-learners.html#cb596-35"></a>      <span class="st">&quot;type&quot;</span>, <span class="co"># handled internally</span></span>
<span id="cb596-36"><a href="extending-learners.html#cb596-36"></a>      <span class="st">&quot;na.action&quot;</span> <span class="co"># handled internally</span></span>
<span id="cb596-37"><a href="extending-learners.html#cb596-37"></a>    )</span>
<span id="cb596-38"><a href="extending-learners.html#cb596-38"></a></span>
<span id="cb596-39"><a href="extending-learners.html#cb596-39"></a>  ParamTest =<span class="st"> </span><span class="kw">run_paramtest</span>(learner, fun, exclude)</span>
<span id="cb596-40"><a href="extending-learners.html#cb596-40"></a>  <span class="kw">expect_true</span>(ParamTest, <span class="dt">info =</span> <span class="kw">paste0</span>(</span>
<span id="cb596-41"><a href="extending-learners.html#cb596-41"></a>    <span class="st">&quot;Missing parameters:&quot;</span>,</span>
<span id="cb596-42"><a href="extending-learners.html#cb596-42"></a>    <span class="kw">paste0</span>(<span class="st">&quot;- &#39;&quot;</span>, ParamTest<span class="op">$</span>missing, <span class="st">&quot;&#39;&quot;</span>, <span class="dt">collapse =</span> <span class="st">&quot;</span></span>
<span id="cb596-43"><a href="extending-learners.html#cb596-43"></a><span class="st">&quot;</span>)))</span>
<span id="cb596-44"><a href="extending-learners.html#cb596-44"></a>})</span></code></pre></div>
</div>
</div>
<div id="cleaning" class="section level3">
<h3><span class="header-section-number">6.1.9</span> Package Cleaning</h3>
<p>Once all tests are passing, run the following functions to ensure that the package remains clean and tidy</p>
<ol style="list-style-type: decimal">
<li><code>devtools::document(roclets = c('rd', 'collate', 'namespace'))</code></li>
<li>If you haven’t done this before run: <code>remotes::install_github('pat-s/styler@mlr-style')</code></li>
<li><code>styler::style_pkg(style = styler::mlr_style)</code></li>
<li><code>usethis::use_tidy_description()</code></li>
<li><code>lintr::lint_package()</code></li>
</ol>
<p>Please fix any errors indicated by <code>lintr</code> before creating a pull request. Finally ensure that all <code>FIXME</code> are resolved and deleted in the generated files.</p>
<p>You are now ready to add your learner to the mlr3 ecosystem! Simply open a pull request to  with the new learner template and complete the checklist in there. Once the pull request is approved and merged, your learner will automatically appear on the <a href="https://mlr3extralearners.mlr-org.com/">package website</a>.</p>
</div>
<div id="thanks-and-maintenance" class="section level3">
<h3><span class="header-section-number">6.1.10</span> Thanks and Maintenance</h3>
<p>Thank you for contributing to the mlr3 ecosystem!</p>
<p>When you created the learner you would have given your GitHub handle, meaning that you are now listed as the learner author and maintainer. This means that if the learner breaks it is your responsibility to fix the learner - you can view the status of your learner <a href="https://mlr3extralearners.mlr-org.com/articles/learners/learner_status.html">here</a>.</p>
</div>
<div id="learner-faq" class="section level3">
<h3><span class="header-section-number">6.1.11</span> Learner FAQ</h3>
<p><strong>Question 1</strong></p>
<p>How to deal with Parameters which have no default?</p>
<p><strong>Answer</strong></p>
<p>If the learner does not work without providing a value, set a reasonable default in <code>param_set$values</code>, add tag <code>"required"</code> to the parameter and document your default properly.</p>
<p><strong>Question 2</strong></p>
<p>Where to add the package of the upstream package in the DESCRIPTION file?</p>
<p>Add it to the “Imports” section.
This will install the upstream package during the installation of the mlr3learner if it has not yet been installed by the user.</p>
<p><strong>Question 3</strong></p>
<p>How to handle arguments from external “control” functions such as <code>glmnet::glmnet_control()</code>?</p>
<p><strong>Answer</strong></p>
<p>See <a href="https://mlr3book.mlr-org.com/extending-learners.html#learner-control">“Control objects/functions of learners”</a>.</p>
<p><strong>Question 4</strong></p>
<p>How to document if my learner uses a custom default value that differs to the default of the upstream package?</p>
<p><strong>Answer</strong></p>
<p>If you set a custom default for the mlr3learner that does not cope with the one of the upstream package (think twice if this is really needed!), add this information to the help page of the respective learner.</p>
<p>You can use the following skeleton for this:</p>
<div class="sourceCode" id="cb597"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb597-1"><a href="extending-learners.html#cb597-1"></a><span class="co">#&#39; @section Custom mlr3 defaults:</span></span>
<span id="cb597-2"><a href="extending-learners.html#cb597-2"></a><span class="co">#&#39; - `&lt;parameter&gt;`:</span></span>
<span id="cb597-3"><a href="extending-learners.html#cb597-3"></a><span class="co">#&#39;   - Actual default: &lt;value&gt;</span></span>
<span id="cb597-4"><a href="extending-learners.html#cb597-4"></a><span class="co">#&#39;   - Adjusted default: &lt;value&gt;</span></span>
<span id="cb597-5"><a href="extending-learners.html#cb597-5"></a><span class="co">#&#39;   - Reason for change: &lt;text&gt;</span></span></code></pre></div>
<p><strong>Question 5</strong></p>
<p>When should the <code>"required"</code> tag be used when defining Params and what is its purpose?</p>
<p><strong>Answer</strong></p>
<p>The <code>"required"</code> tag should be used when the following conditions are met:</p>
<ul>
<li>The upstream function cannot be run without setting this parameter, i.e. it would throw an error.</li>
<li>The parameter has no default in the upstream function.</li>
</ul>
<p>In mlr3 we follow the principle that every learner should be constructable without setting custom parameters.
Therefore, if a parameter has no default in the upstream function, a custom value is usually set for this parameter in the mlr3learner (remember to document such changes in the help page of the learner).</p>
<p>Even though this practice ensures that no parameter is unset in an mlr3learner and partially removes the usefulness of the <code>"required"</code> tag, the tag is still useful in the following scenario:</p>
<p>If a user sets custom parameters after construction of the learner</p>
<div class="sourceCode" id="cb598"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb598-1"><a href="extending-learners.html#cb598-1"></a>lrn =<span class="st"> </span><span class="kw">lrn</span>(<span class="st">&quot;&lt;id&gt;&quot;</span>)</span>
<span id="cb598-2"><a href="extending-learners.html#cb598-2"></a>lrn<span class="op">$</span>param_set<span class="op">$</span>values =<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;&lt;param&gt;&quot;</span> =<span class="st"> </span><span class="er">&lt;</span>value<span class="op">&gt;</span>)</span></code></pre></div>
<p>Here, all parameters besides the ones set in the list would be unset.
See <code>paradox::ParamSet</code> for more information.
If a parameter is tagged as <code>"required"</code> in the ParamSet, the call above would error and prompt the user that required parameters are missing.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="extending.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="extending-measures.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/mlr-org/mlr3book/edit/master/bookdown/06-extending-learners.Rmd",
"text": "Edit this chapter"
},
"history": {
"link": "https://github.com/mlr-org/mlr3book/commits/master/06-extending-learners.Rmd",
"text": "Edit history"
},
"view": {
"link": null,
"text": null
},
"download": [["mlr3book.pdf", "PDF"]],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
